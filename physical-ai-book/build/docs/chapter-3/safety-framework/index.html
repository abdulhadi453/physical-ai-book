<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chapter-3/safety-framework" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Safety and Reliability Framework for Isaac Sim AI-Robot Systems | AI-Native Textbook for Physical AI &amp; Humanoid Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://physical-ai-book.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://physical-ai-book.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://physical-ai-book.github.io/docs/chapter-3/safety-framework"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ur"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Safety and Reliability Framework for Isaac Sim AI-Robot Systems | AI-Native Textbook for Physical AI &amp; Humanoid Robotics"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://physical-ai-book.github.io/docs/chapter-3/safety-framework"><link data-rh="true" rel="alternate" href="https://physical-ai-book.github.io/docs/chapter-3/safety-framework" hreflang="en"><link data-rh="true" rel="alternate" href="https://physical-ai-book.github.io/ur/docs/chapter-3/safety-framework" hreflang="ur"><link data-rh="true" rel="alternate" href="https://physical-ai-book.github.io/docs/chapter-3/safety-framework" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Safety and Reliability Framework for Isaac Sim AI-Robot Systems","item":"https://physical-ai-book.github.io/docs/chapter-3/safety-framework"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="AI-Native Textbook for Physical AI &amp; Humanoid Robotics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="AI-Native Textbook for Physical AI &amp; Humanoid Robotics Atom Feed"><link rel="stylesheet" href="/assets/css/styles.cf33f44d.css">
<script src="/assets/js/runtime~main.92299d71.js" defer="defer"></script>
<script src="/assets/js/main.da092ae6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Physical AI Book Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Physical AI Book Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Physical AI &amp; Humanoid Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Chapters</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/physical-ai-book/hackathon-book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Introduction to Physical AI &amp; Humanoid Robotics" class="linkLabel_WmDU">Introduction to Physical AI &amp; Humanoid Robotics</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/chapter-1/intro"><span title="Module 1: The Robotic Nervous System (ROS 2)" class="categoryLinkLabel_W154">Module 1: The Robotic Nervous System (ROS 2)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/chapter-2/intro"><span title="Module 2: The Digital Twin (Gazebo &amp; Unity)" class="categoryLinkLabel_W154">Module 2: The Digital Twin (Gazebo &amp; Unity)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/chapter-3/intro"><span title="Module 3: The AI-Robot Brain (NVIDIA Isaac™)" class="categoryLinkLabel_W154">Module 3: The AI-Robot Brain (NVIDIA Isaac™)</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/chapter-3/intro"><span title="Chapter 3.1: NVIDIA Isaac Platform Integration" class="categoryLinkLabel_W154">Chapter 3.1: NVIDIA Isaac Platform Integration</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/chapter-3/setup"><span title="Chapter 3.2: System Setup and Configuration" class="categoryLinkLabel_W154">Chapter 3.2: System Setup and Configuration</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/chapter-3/perception-pipeline"><span title="Chapter 3.3: Advanced Implementation" class="categoryLinkLabel_W154">Chapter 3.3: Advanced Implementation</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/perception-pipeline"><span title="Isaac ROS Perception Pipeline Implementation" class="linkLabel_WmDU">Isaac ROS Perception Pipeline Implementation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/sensor-integration"><span title="Multimodal Sensor Integration in Isaac Sim" class="linkLabel_WmDU">Multimodal Sensor Integration in Isaac Sim</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/model-deployment"><span title="AI Model Deployment in Isaac Sim Environment" class="linkLabel_WmDU">AI Model Deployment in Isaac Sim Environment</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/exercises"><span title="Module 3 Exercise Framework: The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Module 3 Exercise Framework: The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/assessments"><span title="Module 3 Assessments: The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Module 3 Assessments: The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/assessment"><span title="Module 3 Assessment: The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Module 3 Assessment: The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/progress-tracking-guide"><span title="Progress Tracking Guide: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Progress Tracking Guide: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/educator-guide"><span title="Educator Guide: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Educator Guide: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/researcher-resources"><span title="Researcher Resources: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Researcher Resources: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/communication-protocols"><span title="AI-Robot Communication Protocols for Isaac Sim" class="linkLabel_WmDU">AI-Robot Communication Protocols for Isaac Sim</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/chapter-3/safety-framework"><span title="Safety and Reliability Framework for Isaac Sim AI-Robot Systems" class="linkLabel_WmDU">Safety and Reliability Framework for Isaac Sim AI-Robot Systems</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/performance-monitoring"><span title="Performance Monitoring Tools for Isaac Sim AI-Robot Systems" class="linkLabel_WmDU">Performance Monitoring Tools for Isaac Sim AI-Robot Systems</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/chapter-3/summary"><span title="Module 3 Summary: The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Module 3 Summary: The AI-Robot Brain (NVIDIA Isaac™)</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/chapter-4/intro"><span title="Module 4: Vision-Language-Action (VLA) Systems" class="categoryLinkLabel_W154">Module 4: Vision-Language-Action (VLA) Systems</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing"><span title="Contributing" class="linkLabel_WmDU">Contributing</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Module 3: The AI-Robot Brain (NVIDIA Isaac™)</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Chapter 3.3: Advanced Implementation</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Safety and Reliability Framework for Isaac Sim AI-Robot Systems</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Safety and Reliability Framework for Isaac Sim AI-Robot Systems</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<p>This document provides comprehensive guidelines for implementing safety and reliability frameworks in the NVIDIA Isaac Sim AI-robot systems for Module 3. The framework ensures that AI-robot systems operate safely and reliably in both simulation and real-world environments.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction-to-safety-and-reliability-in-ai-robotics">Introduction to Safety and Reliability in AI-Robotics<a href="#introduction-to-safety-and-reliability-in-ai-robotics" class="hash-link" aria-label="Direct link to Introduction to Safety and Reliability in AI-Robotics" title="Direct link to Introduction to Safety and Reliability in AI-Robotics" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-safety-and-reliability-in-ai-robotics">What is Safety and Reliability in AI-Robotics?<a href="#what-is-safety-and-reliability-in-ai-robotics" class="hash-link" aria-label="Direct link to What is Safety and Reliability in AI-Robotics?" title="Direct link to What is Safety and Reliability in AI-Robotics?" translate="no">​</a></h3>
<p>Safety and reliability in AI-robotics encompasses:</p>
<ul>
<li class=""><strong>Safety</strong>: Ensuring the robot operates without causing harm to humans, environment, or itself</li>
<li class=""><strong>Reliability</strong>: Ensuring consistent, predictable operation under various conditions</li>
<li class=""><strong>Robustness</strong>: Maintaining functionality despite uncertainties and disturbances</li>
<li class=""><strong>Fail-safe mechanisms</strong>: Graceful degradation when failures occur</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-safety-and-reliability-principles">Key Safety and Reliability Principles<a href="#key-safety-and-reliability-principles" class="hash-link" aria-label="Direct link to Key Safety and Reliability Principles" title="Direct link to Key Safety and Reliability Principles" translate="no">​</a></h3>
<ol>
<li class=""><strong>Fail-Safe Design</strong>: Systems default to safe states on failure</li>
<li class=""><strong>Redundancy</strong>: Multiple systems for critical functions</li>
<li class=""><strong>Monitoring</strong>: Continuous system health assessment</li>
<li class=""><strong>Validation</strong>: Verification of safe operation</li>
<li class=""><strong>Recovery</strong>: Automatic recovery from failures</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="safety-framework-components">Safety Framework Components<a href="#safety-framework-components" class="hash-link" aria-label="Direct link to Safety Framework Components" title="Direct link to Safety Framework Components" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-safety-monitor-node">1. Creating Safety Monitor Node<a href="#1-creating-safety-monitor-node" class="hash-link" aria-label="Direct link to 1. Creating Safety Monitor Node" title="Direct link to 1. Creating Safety Monitor Node" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_safety_framework/safety_framework/safety_monitor.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sensor_msgs.msg import LaserScan, Imu, BatteryState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import Twist, PoseStamped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from std_msgs.msg import Bool, String, Float32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from nav_msgs.msg import Odometry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from builtin_interfaces.msg import Duration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import math</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from enum import Enum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from typing import Dict, List, Optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SafetyLevel(Enum):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SAFE = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WARNING = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DANGER = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EMERGENCY_STOP = 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SafetyMonitor(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;safety_monitor&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Safety thresholds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.safety_thresholds = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;min_distance_obstacle&#x27;: 0.3,  # meters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;max_linear_velocity&#x27;: 0.5,    # m/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;max_angular_velocity&#x27;: 1.0,   # rad/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;max_acceleration&#x27;: 2.0,       # m/s²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;battery_low_threshold&#x27;: 20.0, # percentage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;imu_temperature_threshold&#x27;: 80.0,  # degrees Celsius</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;max_tilt_angle&#x27;: 30.0,        # degrees</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;max_operation_time&#x27;: 3600.0   # seconds (1 hour)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # System state tracking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.current_velocity = Twist()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.previous_velocity = Twist()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.previous_time = self.get_clock().now()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.battery_level = 100.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.odom_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.operation_start_time = self.get_clock().now()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.emergency_stop_active = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Subscribers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LaserScan,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/scan&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.lidar_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Imu,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/imu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.battery_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            BatteryState,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/battery_state&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.battery_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.cmd_vel_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Twist,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/cmd_vel&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.cmd_vel_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.odom_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Odometry,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/odom&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.odom_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publishers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.safety_status_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/safety/safe_to_proceed&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.emergency_stop_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/safety/emergency_stop&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.safety_level_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/safety/level&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.safety_report_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/safety/report&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Timer for periodic safety checks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.safety_timer = self.create_timer(0.1, self.perform_safety_check)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Safety Monitor initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def lidar_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Process LiDAR data for obstacle detection&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_data = msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def imu_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Process IMU data for orientation and acceleration&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_data = msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def battery_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Process battery data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.battery_level = msg.percentage if msg.percentage is not None else 100.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def cmd_vel_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Process velocity commands for safety checking&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.previous_velocity = self.current_velocity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.current_velocity = msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.previous_time = self.get_clock().now()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def odom_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Process odometry data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.odom_data = msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def perform_safety_check(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Perform comprehensive safety check&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Check all safety conditions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_level, report = self.evaluate_safety_conditions()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Publish safety status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safe_msg = Bool()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safe_msg.data = (safety_level == SafetyLevel.SAFE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.safety_status_publisher.publish(safe_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Handle emergency stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if safety_level == SafetyLevel.EMERGENCY_STOP:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.activate_emergency_stop()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.deactivate_emergency_stop()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Publish safety level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            level_msg = String()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            level_msg.data = safety_level.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.safety_level_publisher.publish(level_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Publish safety report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            report_msg = String()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            report_msg.data = report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.safety_report_publisher.publish(report_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error in safety check: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def evaluate_safety_conditions(self) -&gt; tuple:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Evaluate all safety conditions and return safety level and report&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        safety_issues = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        safety_level = SafetyLevel.SAFE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check for obstacles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.lidar_data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            min_distance = min(self.lidar_data.ranges) if self.lidar_data.ranges else float(&#x27;inf&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if min_distance &lt; self.safety_thresholds[&#x27;min_distance_obstacle&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                safety_issues.append(f&quot;Obstacle detected at {min_distance:.2f}m (threshold: {self.safety_thresholds[&#x27;min_distance_obstacle&#x27;]}m)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                safety_level = max(safety_level, SafetyLevel.DANGER)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check velocity limits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        linear_speed = math.sqrt(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.current_velocity.linear.x**2 +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.current_velocity.linear.y**2 +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.current_velocity.linear.z**2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if linear_speed &gt; self.safety_thresholds[&#x27;max_linear_velocity&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_issues.append(f&quot;Linear velocity too high: {linear_speed:.2f}m/s (threshold: {self.safety_thresholds[&#x27;max_linear_velocity&#x27;]}m/s)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_level = max(safety_level, SafetyLevel.WARNING)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        angular_speed = math.sqrt(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.current_velocity.angular.x**2 +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.current_velocity.angular.y**2 +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.current_velocity.angular.z**2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if angular_speed &gt; self.safety_thresholds[&#x27;max_angular_velocity&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_issues.append(f&quot;Angular velocity too high: {angular_speed:.2f}rad/s (threshold: {self.safety_thresholds[&#x27;max_angular_velocity&#x27;]}rad/s)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_level = max(safety_level, SafetyLevel.WARNING)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check battery level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.battery_level &lt; self.safety_thresholds[&#x27;battery_low_threshold&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_issues.append(f&quot;Battery level low: {self.battery_level:.1f}% (threshold: {self.safety_thresholds[&#x27;battery_low_threshold&#x27;]}%)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_level = max(safety_level, SafetyLevel.WARNING)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check IMU data for tilt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.imu_data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Calculate tilt from IMU orientation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            orientation = self.imu_data.orientation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Convert quaternion to Euler angles to check tilt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            w, x, y, z = orientation.w, orientation.x, orientation.y, orientation.z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pitch = math.asin(2.0 * (w * y - z * x))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            roll = math.atan2(2.0 * (w * x + y * z), w * w - x * x - y * y + z * z)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tilt_angle = math.degrees(math.sqrt(pitch**2 + roll**2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if tilt_angle &gt; self.safety_thresholds[&#x27;max_tilt_angle&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                safety_issues.append(f&quot;Excessive tilt: {tilt_angle:.1f}° (threshold: {self.safety_thresholds[&#x27;max_tilt_angle&#x27;]}°)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                safety_level = max(safety_level, SafetyLevel.DANGER)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check operation time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        current_time = self.get_clock().now()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        operation_duration = (current_time - self.operation_start_time).nanoseconds / 1e9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if operation_duration &gt; self.safety_thresholds[&#x27;max_operation_time&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_issues.append(f&quot;Operation time exceeded: {operation_duration:.0f}s (threshold: {self.safety_thresholds[&#x27;max_operation_time&#x27;]}s)&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            safety_level = max(safety_level, SafetyLevel.WARNING)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Generate report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if safety_issues:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            report = f&quot;Safety Level: {safety_level.name}, Issues: &quot; + &quot;; &quot;.join(safety_issues)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            report = f&quot;Safety Level: {safety_level.name}, All systems nominal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return safety_level, report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def activate_emergency_stop(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Activate emergency stop&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if not self.emergency_stop_active:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.emergency_stop_active = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            stop_msg = Bool()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            stop_msg.data = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.emergency_stop_publisher.publish(stop_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().warn(&#x27;EMERGENCY STOP ACTIVATED&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def deactivate_emergency_stop(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Deactivate emergency stop&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.emergency_stop_active:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.emergency_stop_active = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            stop_msg = Bool()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            stop_msg.data = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.emergency_stop_publisher.publish(stop_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().info(&#x27;Emergency stop deactivated&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def get_safety_status(self) -&gt; Dict:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Get current safety status summary&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        safety_level, report = self.evaluate_safety_conditions()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;safety_level&#x27;: safety_level.name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;report&#x27;: report,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;battery_level&#x27;: self.battery_level,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;operation_time&#x27;: (self.get_clock().now() - self.operation_start_time).nanoseconds / 1e9,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;emergency_stop_active&#x27;: self.emergency_stop_active</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    safety_monitor = SafetyMonitor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.spin(safety_monitor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status = safety_monitor.get_safety_status()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(f&quot;Safety Status: {status}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        safety_monitor.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-creating-reliability-monitor-node">2. Creating Reliability Monitor Node<a href="#2-creating-reliability-monitor-node" class="hash-link" aria-label="Direct link to 2. Creating Reliability Monitor Node" title="Direct link to 2. Creating Reliability Monitor Node" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_safety_framework/safety_framework/reliability_monitor.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from std_msgs.msg import Bool, String, Float32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sensor_msgs.msg import Image, LaserScan, Imu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import Twist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from builtin_interfaces.msg import Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from collections import deque, defaultdict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from typing import Dict, List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ReliabilityMonitor(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;reliability_monitor&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Reliability tracking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.message_counts = defaultdict(int)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.message_intervals = defaultdict(deque)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.message_timeliness = defaultdict(deque)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.failure_counts = defaultdict(int)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.uptime_start = time.time()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.reliability_scores = defaultdict(float)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Topic reliability thresholds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.reliability_thresholds = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;min_frequency&#x27;: 5.0,      # Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;max_message_age&#x27;: 1.0,    # seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;max_failure_rate&#x27;: 0.1    # 10% failure rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Subscribers for key topics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.topic_subscribers = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/camera/color/image_raw&#x27;: self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Image, &#x27;/camera/color/image_raw&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.create_message_callback(&#x27;/camera/color/image_raw&#x27;), 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/scan&#x27;: self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                LaserScan, &#x27;/scan&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.create_message_callback(&#x27;/scan&#x27;), 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/imu&#x27;: self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Imu, &#x27;/imu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.create_message_callback(&#x27;/imu&#x27;), 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/cmd_vel&#x27;: self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Twist, &#x27;/cmd_vel&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.create_message_callback(&#x27;/cmd_vel&#x27;), 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publishers for reliability metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.reliability_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Float32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/reliability/score&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.reliability_status_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/reliability/status&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Timer for periodic reliability assessment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.assessment_timer = self.create_timer(5.0, self.assess_reliability)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Reliability Monitor initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_message_callback(self, topic_name):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Create a callback function for a specific topic&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def callback(msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_time = self.get_clock().now().nanoseconds / 1e9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.message_counts[topic_name] += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Calculate message interval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if topic_name in self.message_intervals:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if len(self.message_intervals[topic_name]) &gt; 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    last_time = self.message_intervals[topic_name][-1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    interval = current_time - last_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.message_intervals[topic_name].append(current_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Keep only recent intervals (last 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if len(self.message_intervals[topic_name]) &gt; 10:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        self.message_intervals[topic_name].popleft()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.message_intervals[topic_name].append(current_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.message_intervals[topic_name] = deque([current_time], maxlen=10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Check message timeliness (for topics with timestamps)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if hasattr(msg, &#x27;header&#x27;) and hasattr(msg.header, &#x27;stamp&#x27;):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                msg_time = msg.header.stamp.sec + msg.header.stamp.nanosec / 1e9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                age = current_time - msg_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.message_timeliness[topic_name].append(age)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Keep only recent timeliness data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if len(self.message_timeliness[topic_name]) &gt; 10:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.message_timeliness[topic_name].popleft()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.message_timeliness[topic_name] = deque(maxlen=10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def assess_reliability(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Assess reliability of all monitored topics&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            overall_reliability = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            topic_count = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            reliability_report = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for topic in self.topic_subscribers.keys():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                reliability_score = self.calculate_topic_reliability(topic)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.reliability_scores[topic] = reliability_score</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                overall_reliability += reliability_score</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                topic_count += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Add to report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                status = &quot;HIGH&quot; if reliability_score &gt;= 0.8 else &quot;MEDIUM&quot; if reliability_score &gt;= 0.5 else &quot;LOW&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                reliability_report.append(f&quot;{topic}: {status} ({reliability_score:.2f})&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Calculate overall reliability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if topic_count &gt; 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                overall_reliability /= topic_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Publish overall reliability score</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            score_msg = Float32()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            score_msg.data = overall_reliability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.reliability_publisher.publish(score_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Publish reliability status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            status_msg = String()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            status_msg.data = f&quot;Overall Reliability: {overall_reliability:.2f}, Topics: {&#x27;, &#x27;.join(reliability_report)}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.reliability_status_publisher.publish(status_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error in reliability assessment: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def calculate_topic_reliability(self, topic_name) -&gt; float:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Calculate reliability score for a specific topic&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Base score</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        score = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check message frequency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if topic_name in self.message_intervals and len(self.message_intervals[topic_name]) &gt;= 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            intervals = list(self.message_intervals[topic_name])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if len(intervals) &gt; 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                avg_interval = sum(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    intervals[i] - intervals[i-1] for i in range(1, len(intervals))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ) / (len(intervals) - 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if avg_interval &gt; 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    frequency = 1.0 / avg_interval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if frequency &lt; self.reliability_thresholds[&#x27;min_frequency&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        # Reduce score based on frequency deficiency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        score *= (frequency / self.reliability_thresholds[&#x27;min_frequency&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    score = 0.0  # Invalid interval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check message timeliness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if topic_name in self.message_timeliness and len(self.message_timeliness[topic_name]) &gt; 0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            avg_age = sum(self.message_timeliness[topic_name]) / len(self.message_timeliness[topic_name])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if avg_age &gt; self.reliability_thresholds[&#x27;max_message_age&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Reduce score based on message age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                penalty = min(1.0, (avg_age - self.reliability_thresholds[&#x27;max_message_age&#x27;]) /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             self.reliability_thresholds[&#x27;max_message_age&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                score *= (1.0 - penalty)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Apply failure rate penalty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        total_messages = self.message_counts.get(topic_name, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        failure_rate = self.failure_counts.get(topic_name, 0) / total_messages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if failure_rate &gt; self.reliability_thresholds[&#x27;max_failure_rate&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            penalty = min(1.0, (failure_rate - self.reliability_thresholds[&#x27;max_failure_rate&#x27;]) /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         (1.0 - self.reliability_thresholds[&#x27;max_failure_rate&#x27;]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            score *= (1.0 - penalty)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Ensure score is between 0 and 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return max(0.0, min(1.0, score))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def get_reliability_summary(self) -&gt; Dict:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Get reliability summary&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;overall_reliability&#x27;: sum(self.reliability_scores.values()) / len(self.reliability_scores) if self.reliability_scores else 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;uptime_seconds&#x27;: time.time() - self.uptime_start,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;topic_reliabilities&#x27;: dict(self.reliability_scores),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;message_counts&#x27;: dict(self.message_counts),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;failure_counts&#x27;: dict(self.failure_counts)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reliability_monitor = ReliabilityMonitor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.spin(reliability_monitor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        summary = reliability_monitor.get_reliability_summary()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(f&quot;Reliability Summary: {summary}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reliability_monitor.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="fault-detection-and-recovery">Fault Detection and Recovery<a href="#fault-detection-and-recovery" class="hash-link" aria-label="Direct link to Fault Detection and Recovery" title="Direct link to Fault Detection and Recovery" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-fault-detection-system">1. Creating Fault Detection System<a href="#1-creating-fault-detection-system" class="hash-link" aria-label="Direct link to 1. Creating Fault Detection System" title="Direct link to 1. Creating Fault Detection System" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_safety_framework/safety_framework/fault_detector.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sensor_msgs.msg import Image, LaserScan, Imu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from std_msgs.msg import Bool, String, Float32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import Twist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from builtin_interfaces.msg import Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from enum import Enum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from collections import deque, defaultdict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from typing import Dict, List, Optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FaultType(Enum):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SENSOR_FAILURE = &quot;sensor_failure&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    COMMUNICATION_ERROR = &quot;communication_error&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ACTUATOR_FAULT = &quot;actuator_fault&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SOFTWARE_ERROR = &quot;software_error&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ENVIRONMENTAL_HAZARD = &quot;environmental_hazard&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FaultSeverity(Enum):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LOW = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MEDIUM = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HIGH = 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CRITICAL = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FaultDetector(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;fault_detector&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Fault detection parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fault_detection_params = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;sensor_variance_threshold&#x27;: 0.1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;sensor_stuck_threshold&#x27;: 0.01,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;message_timeout&#x27;: 2.0,  # seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;imu_drift_threshold&#x27;: 0.05,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;lidar_spike_threshold&#x27;: 5.0  # times the median</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Data tracking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.sensor_data_history = defaultdict(deque)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.last_message_times = defaultdict(Time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fault_history = deque(maxlen=100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.active_faults = set()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Subscribers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.topic_subscribers = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/camera/color/image_raw&#x27;: self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Image, &#x27;/camera/color/image_raw&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.create_sensor_callback(&#x27;/camera/color/image_raw&#x27;), 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/scan&#x27;: self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                LaserScan, &#x27;/scan&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.create_sensor_callback(&#x27;/scan&#x27;), 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/imu&#x27;: self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Imu, &#x27;/imu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.create_sensor_callback(&#x27;/imu&#x27;), 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publishers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fault_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/fault/detected&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fault_status_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/fault/active&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Timer for periodic fault detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.detection_timer = self.create_timer(1.0, self.detect_faults)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Fault Detector initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_sensor_callback(self, topic_name):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Create a callback function for sensor data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def callback(msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            current_time = self.get_clock().now()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.last_message_times[topic_name] = current_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Process sensor-specific data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if topic_name == &#x27;/scan&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Process LiDAR data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if hasattr(msg, &#x27;ranges&#x27;) and msg.ranges:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Store range data for variance analysis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    data_point = np.mean([r for r in msg.ranges if 0.1 &lt; r &lt; 10.0])  # Filter valid ranges</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.sensor_data_history[topic_name].append(data_point)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            elif topic_name == &#x27;/imu&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Process IMU data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if hasattr(msg, &#x27;linear_acceleration&#x27;):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Store acceleration magnitude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    acc_mag = np.sqrt(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        msg.linear_acceleration.x**2 +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        msg.linear_acceleration.y**2 +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        msg.linear_acceleration.z**2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.sensor_data_history[topic_name].append(acc_mag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            elif topic_name == &#x27;/camera/color/image_raw&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Process image data (simplified - just track image arrival)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.sensor_data_history[topic_name].append(1)  # Just mark that image arrived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Keep history to reasonable size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if len(self.sensor_data_history[topic_name]) &gt; 50:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.sensor_data_history[topic_name].popleft()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def detect_faults(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Perform fault detection on all monitored systems&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            detected_faults = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Check each monitored topic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for topic, last_time in self.last_message_times.items():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                current_time = self.get_clock().now()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Check for message timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                time_diff = (current_time.nanoseconds - last_time.nanoseconds) / 1e9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if time_diff &gt; self.fault_detection_params[&#x27;message_timeout&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    fault = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &#x27;type&#x27;: FaultType.COMMUNICATION_ERROR,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &#x27;severity&#x27;: FaultSeverity.HIGH,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &#x27;component&#x27;: topic,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &#x27;description&#x27;: f&#x27;Message timeout: {time_diff:.2f}s since last message&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    detected_faults.append(fault)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Check sensor data patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for topic, data_history in self.sensor_data_history.items():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if len(data_history) &gt;= 10:  # Need enough data for analysis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    data_array = np.array(data_history)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Check for sensor stuck (very low variance)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    variance = np.var(data_array)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if variance &lt; self.fault_detection_params[&#x27;sensor_stuck_threshold&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        fault = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &#x27;type&#x27;: FaultType.SENSOR_FAILURE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &#x27;severity&#x27;: FaultSeverity.MEDIUM,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &#x27;component&#x27;: topic,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &#x27;description&#x27;: f&#x27;Sensor stuck detected (variance: {variance:.6f})&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        detected_faults.append(fault)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Check for high variance (potential sensor noise)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if variance &gt; self.fault_detection_params[&#x27;sensor_variance_threshold&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        fault = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &#x27;type&#x27;: FaultType.SENSOR_FAILURE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &#x27;severity&#x27;: FaultSeverity.MEDIUM,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &#x27;component&#x27;: topic,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &#x27;description&#x27;: f&#x27;High sensor variance detected: {variance:.6f}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        detected_faults.append(fault)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Check for LiDAR specific issues</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if topic == &#x27;/scan&#x27; and len(data_array) &gt;= 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        # Check for sudden spikes in range data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        consecutive_diffs = np.abs(np.diff(data_array))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if len(consecutive_diffs) &gt; 0 and np.max(consecutive_diffs) &gt; self.fault_detection_params[&#x27;lidar_spike_threshold&#x27;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            fault = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &#x27;type&#x27;: FaultType.SENSOR_FAILURE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &#x27;severity&#x27;: FaultSeverity.MEDIUM,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &#x27;component&#x27;: topic,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                &#x27;description&#x27;: f&#x27;LiDAR spike detected: {np.max(consecutive_diffs):.2f}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            detected_faults.append(fault)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Process detected faults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for fault in detected_faults:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                fault_id = f&quot;{fault[&#x27;type&#x27;].value}_{fault[&#x27;component&#x27;]}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if fault_id not in self.active_faults:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # New fault detected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.active_faults.add(fault_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Publish fault notification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    fault_msg = String()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    fault_msg.data = f&quot;{fault[&#x27;type&#x27;].value}: {fault[&#x27;description&#x27;]}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.fault_publisher.publish(fault_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.get_logger().warn(f&quot;FAULT DETECTED: {fault_msg.data}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    # Add to history</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    fault[&#x27;timestamp&#x27;] = self.get_clock().now().nanoseconds / 1e9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.fault_history.append(fault)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Update fault status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            status_msg = Bool()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            status_msg.data = len(self.active_faults) &gt; 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.fault_status_publisher.publish(status_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error in fault detection: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def get_fault_summary(self) -&gt; Dict:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Get fault detection summary&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;active_faults_count&#x27;: len(self.active_faults),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;active_faults&#x27;: list(self.active_faults),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;total_faults_detected&#x27;: len(self.fault_history),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;recent_faults&#x27;: list(self.fault_history)[-5:]  # Last 5 faults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fault_detector = FaultDetector()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.spin(fault_detector)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        summary = fault_detector.get_fault_summary()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(f&quot;Fault Summary: {summary}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fault_detector.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="safety-and-reliability-launch-files">Safety and Reliability Launch Files<a href="#safety-and-reliability-launch-files" class="hash-link" aria-label="Direct link to Safety and Reliability Launch Files" title="Direct link to Safety and Reliability Launch Files" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-safety-framework-package">1. Creating Safety Framework Package<a href="#1-creating-safety-framework-package" class="hash-link" aria-label="Direct link to 1. Creating Safety Framework Package" title="Direct link to 1. Creating Safety Framework Package" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/isaac_ros_ws/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source /opt/ros/humble/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create safety framework package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 pkg create --build-type ament_python isaac_safety_framework --dependencies rclpy sensor_msgs geometry_msgs std_msgs message_filters tf2_ros tf2_geometry_msgs nav_msgs vision_msgs builtin_interfaces</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-creating-setup-files-for-safety-package">2. Creating Setup Files for Safety Package<a href="#2-creating-setup-files-for-safety-package" class="hash-link" aria-label="Direct link to 2. Creating Setup Files for Safety Package" title="Direct link to 2. Creating Setup Files for Safety Package" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_safety_framework/setup.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from setuptools import setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from glob import glob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package_name = &#x27;isaac_safety_framework&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setup(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name=package_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version=&#x27;0.0.1&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    packages=[package_name],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_files=[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (&#x27;share/ament_index/resource_index/packages&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [&#x27;resource/&#x27; + package_name]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (&#x27;share/&#x27; + package_name, [&#x27;package.xml&#x27;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Include launch files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (os.path.join(&#x27;share&#x27;, package_name, &#x27;launch&#x27;), glob(&#x27;launch/*.py&#x27;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    install_requires=[&#x27;setuptools&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zip_safe=True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maintainer=&#x27;Your Name&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maintainer_email=&#x27;your.email@example.com&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description=&#x27;Safety and reliability framework for Isaac Sim AI-Robot systems&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    license=&#x27;Apache License 2.0&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tests_require=[&#x27;pytest&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entry_points={</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;console_scripts&#x27;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;safety_monitor = isaac_safety_framework.safety_monitor:main&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;reliability_monitor = isaac_safety_framework.reliability_monitor:main&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;fault_detector = isaac_safety_framework.fault_detector:main&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_safety_framework/package.xml &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml-model href=&quot;http://download.ros.org/schema/package_format3.xsd&quot; schematypens=&quot;http://www.w3.org/2001/XMLSchema&quot;?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;package format=&quot;3&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;name&gt;isaac_safety_framework&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;version&gt;0.0.1&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;description&gt;Safety and reliability framework for Isaac Sim AI-Robot systems&lt;/description&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;maintainer email=&quot;your.email@example.com&quot;&gt;Your Name&lt;/maintainer&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;license&gt;Apache License 2.0&lt;/license&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;rclpy&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;sensor_msgs&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;geometry_msgs&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;std_msgs&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;message_filters&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;tf2_ros&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;tf2_geometry_msgs&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;nav_msgs&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;vision_msgs&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;depend&gt;builtin_interfaces&lt;/depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;test_depend&gt;ament_copyright&lt;/test_depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;test_depend&gt;ament_flake8&lt;/test_depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;test_depend&gt;ament_pep257&lt;/test_depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;test_depend&gt;python3-pytest&lt;/test_depend&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;export&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;build_type&gt;ament_python&lt;/build_type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/export&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/package&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-creating-safety-framework-launch-file">3. Creating Safety Framework Launch File<a href="#3-creating-safety-framework-launch-file" class="hash-link" aria-label="Direct link to 3. Creating Safety Framework Launch File" title="Direct link to 3. Creating Safety Framework Launch File" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/isaac_ros_ws/src/isaac_safety_framework/launch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_safety_framework/launch/safety_framework.launch.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch import LaunchDescription</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch.actions import DeclareLaunchArgument, TimerAction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch.substitutions import LaunchConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch_ros.actions import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from ament_index_python.packages import get_package_share_directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def generate_launch_description():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Launch arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_sim_time = LaunchConfiguration(&#x27;use_sim_time&#x27;, default=&#x27;true&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_safety_monitoring = LaunchConfiguration(&#x27;enable_safety_monitoring&#x27;, default=&#x27;true&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_reliability_monitoring = LaunchConfiguration(&#x27;enable_reliability_monitoring&#x27;, default=&#x27;true&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_fault_detection = LaunchConfiguration(&#x27;enable_fault_detection&#x27;, default=&#x27;true&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Safety monitor node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    safety_monitor = Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package=&#x27;isaac_safety_framework&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable=&#x27;safety_monitor&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name=&#x27;safety_monitor&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parameters=[{&#x27;use_sim_time&#x27;: use_sim_time}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        condition=lambda context: LaunchConfiguration(&#x27;enable_safety_monitoring&#x27;).perform(context) == &#x27;true&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Reliability monitor node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reliability_monitor = Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package=&#x27;isaac_safety_framework&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable=&#x27;reliability_monitor&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name=&#x27;reliability_monitor&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parameters=[{&#x27;use_sim_time&#x27;: use_sim_time}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        condition=lambda context: LaunchConfiguration(&#x27;enable_reliability_monitoring&#x27;).perform(context) == &#x27;true&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Fault detector node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fault_detector = Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package=&#x27;isaac_safety_framework&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable=&#x27;fault_detector&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name=&#x27;fault_detector&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parameters=[{&#x27;use_sim_time&#x27;: use_sim_time}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output=&#x27;screen&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        condition=lambda context: LaunchConfiguration(&#x27;enable_fault_detection&#x27;).perform(context) == &#x27;true&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Return launch description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld = LaunchDescription()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Add launch arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(DeclareLaunchArgument(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;use_sim_time&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_value=&#x27;true&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description=&#x27;Use simulation (Isaac Sim) clock if true&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(DeclareLaunchArgument(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;enable_safety_monitoring&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_value=&#x27;true&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description=&#x27;Enable safety monitoring system&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(DeclareLaunchArgument(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;enable_reliability_monitoring&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_value=&#x27;true&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description=&#x27;Enable reliability monitoring system&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(DeclareLaunchArgument(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;enable_fault_detection&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_value=&#x27;true&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description=&#x27;Enable fault detection system&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Add nodes with timing delays to ensure proper initialization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(safety_monitor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(TimerAction(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        period=2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actions=[reliability_monitor]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(TimerAction(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        period=3.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actions=[fault_detector]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return ld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="safety-configuration-and-policies">Safety Configuration and Policies<a href="#safety-configuration-and-policies" class="hash-link" aria-label="Direct link to Safety Configuration and Policies" title="Direct link to Safety Configuration and Policies" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-safety-configuration-file">1. Creating Safety Configuration File<a href="#1-creating-safety-configuration-file" class="hash-link" aria-label="Direct link to 1. Creating Safety Configuration File" title="Direct link to 1. Creating Safety Configuration File" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_sim_shared/configs/safety_config.yaml &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Safety Configuration for Isaac Sim AI-Robot Systems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">safety_monitor:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Safety thresholds and limits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  thresholds:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    min_distance_obstacle: 0.3  # meters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_linear_velocity: 0.5    # m/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_angular_velocity: 1.0   # rad/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_acceleration: 2.0       # m/s²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    battery_low_threshold: 20.0 # percentage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    imu_temperature_threshold: 80.0  # degrees Celsius</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_tilt_angle: 30.0        # degrees</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_operation_time: 3600.0  # seconds (1 hour)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Emergency stop configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  emergency_stop:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_emergency_stop: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop_distance_threshold: 0.15  # meters before emergency stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeout_after_stop: 30.0       # seconds to wait after emergency stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Safety level definitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  safety_levels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    safe: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    warning: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    danger: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emergency_stop: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reliability_monitor:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Reliability thresholds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  thresholds:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    min_frequency: 5.0      # Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_message_age: 1.0    # seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_failure_rate: 0.1   # 10% failure rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Reliability assessment parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  assessment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assessment_interval: 5.0  # seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    history_size: 10          # number of recent measurements to consider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grace_period: 10.0        # seconds after startup before reliability assessment begins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fault_detector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Fault detection parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sensor_variance_threshold: 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sensor_stuck_threshold: 0.01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message_timeout: 2.0      # seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    imu_drift_threshold: 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lidar_spike_threshold: 5.0  # times the median</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Fault severity levels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  severity_levels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    low: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    medium: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    high: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    critical: 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Fault response actions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  response_actions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    low: &quot;log_warning&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    medium: &quot;reduce_speed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    high: &quot;pause_operation&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    critical: &quot;emergency_stop&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Overall safety policy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">safety_policy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Priority order for safety actions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  priority_order:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;emergency_stop&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;reduce_speed&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;pause_operation&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;log_warning&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Safety mode settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  safety_modes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    operational:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      allow_movement: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      monitoring_level: &quot;full&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    degraded:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      allow_movement: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      monitoring_level: &quot;full&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emergency:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      allow_movement: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      monitoring_level: &quot;full&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      emergency_procedures: [&quot;stop_all_motors&quot;, &quot;activate_emergency_lights&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Recovery procedures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  recovery_procedures:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeout: 30.0  # seconds to wait before attempting recovery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    retry_attempts: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reset_on_recovery: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Logging and reporting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_detailed_logging: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  log_level: &quot;INFO&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  log_file: &quot;/workspace/shared_dir/logs/safety_log.txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  report_interval: 60.0  # seconds between status reports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="safety-testing-and-validation">Safety Testing and Validation<a href="#safety-testing-and-validation" class="hash-link" aria-label="Direct link to Safety Testing and Validation" title="Direct link to Safety Testing and Validation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-safety-test-scripts">1. Creating Safety Test Scripts<a href="#1-creating-safety-test-scripts" class="hash-link" aria-label="Direct link to 1. Creating Safety Test Scripts" title="Direct link to 1. Creating Safety Test Scripts" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_sim_shared/scripts/safety_tests.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from std_msgs.msg import Bool, String, Float32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sensor_msgs.msg import LaserScan, Imu, BatteryState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import Twist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import threading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from typing import Dict, List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SafetyTestSuite(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;safety_test_suite&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Test results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.test_results = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.test_in_progress = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publishers for test scenarios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.cmd_vel_publisher = self.create_publisher(Twist, &#x27;/cmd_vel&#x27;, 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_publisher = self.create_publisher(LaserScan, &#x27;/scan&#x27;, 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Subscribers for safety system responses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.safety_status_subscriber = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Bool, &#x27;/safety/safe_to_proceed&#x27;, self.safety_status_callback, 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.emergency_stop_subscriber = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Bool, &#x27;/safety/emergency_stop&#x27;, self.emergency_stop_callback, 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fault_subscriber = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String, &#x27;/fault/detected&#x27;, self.fault_callback, 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Safety Test Suite initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def safety_status_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Track safety status during tests&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.safety_status = msg.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def emergency_stop_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Track emergency stop status during tests&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.emergency_stop_activated = msg.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def fault_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Track fault detections during tests&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.last_fault = msg.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def run_all_tests(self) -&gt; Dict:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Run all safety tests and return results&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Starting safety test suite...&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        results = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Test 1: Emergency stop functionality</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        results[&#x27;emergency_stop&#x27;] = self.test_emergency_stop()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time.sleep(2)  # Wait between tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Test 2: Obstacle detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        results[&#x27;obstacle_detection&#x27;] = self.test_obstacle_detection()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time.sleep(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Test 3: Velocity limiting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        results[&#x27;velocity_limiting&#x27;] = self.test_velocity_limiting()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time.sleep(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Test 4: Fault detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        results[&#x27;fault_detection&#x27;] = self.test_fault_detection()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time.sleep(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(f&#x27;Safety tests completed: {results}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_emergency_stop(self) -&gt; bool:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Test emergency stop functionality&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Testing emergency stop...&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initially should be safe to proceed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        safe_before = getattr(self, &#x27;safety_status&#x27;, True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Simulate an emergency situation (obstacle very close)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # This would normally be done by publishing a LiDAR scan with close obstacles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # For simulation, we&#x27;ll test the system&#x27;s response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Wait for system to respond</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time.sleep(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check if emergency stop was activated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emergency_activated = getattr(self, &#x27;emergency_stop_activated&#x27;, False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Reset for next test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.emergency_stop_activated = False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result = emergency_activated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(f&#x27;Emergency stop test: {&quot;PASS&quot; if result else &quot;FAIL&quot;}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_obstacle_detection(self) -&gt; bool:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Test obstacle detection functionality&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Testing obstacle detection...&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publish a LiDAR scan with an obstacle close by</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg = LaserScan()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.header.stamp = self.get_clock().now().to_msg()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.header.frame_id = &#x27;lidar_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.angle_min = -3.14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.angle_max = 3.14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.angle_increment = 0.01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.time_increment = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.scan_time = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.range_min = 0.01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.range_max = 25.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create ranges with a close obstacle at 0.2m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ranges = [25.0] * 628  # 628 points for full 360 degrees</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ranges[314] = 0.2  # Obstacle at 180 degrees (0.2m away)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_msg.ranges = ranges</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_publisher.publish(scan_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Wait for processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time.sleep(0.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check if safety system responded appropriately</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # In a real test, we&#x27;d check if safe_to_proceed became False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        safe_status = getattr(self, &#x27;safety_status&#x27;, True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result = not safe_status  # Should be unsafe when obstacle is close</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(f&#x27;Obstacle detection test: {&quot;PASS&quot; if result else &quot;FAIL&quot;}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_velocity_limiting(self) -&gt; bool:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Test velocity limiting functionality&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Testing velocity limiting...&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publish a high velocity command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cmd_msg = Twist()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cmd_msg.linear.x = 2.0  # Exceeds safe limit of 0.5 m/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cmd_msg.angular.z = 2.0 # Exceeds safe limit of 1.0 rad/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.cmd_vel_publisher.publish(cmd_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Wait for processing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time.sleep(0.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Check if system detected the unsafe command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fault_detected = hasattr(self, &#x27;last_fault&#x27;) and &#x27;velocity&#x27; in getattr(self, &#x27;last_fault&#x27;, &#x27;&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result = fault_detected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(f&#x27;Velocity limiting test: {&quot;PASS&quot; if result else &quot;FAIL&quot;}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_fault_detection(self) -&gt; bool:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Test general fault detection&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Testing fault detection...&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Simulate various fault conditions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # In practice, this would involve creating specific sensor data patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # that trigger fault detection algorithms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Wait for any fault detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time.sleep(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fault_detected = hasattr(self, &#x27;last_fault&#x27;) and bool(getattr(self, &#x27;last_fault&#x27;, &#x27;&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result = fault_detected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(f&#x27;Fault detection test: {&quot;PASS&quot; if result else &quot;FAIL&quot;}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def get_test_summary(self) -&gt; Dict:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Get summary of all safety tests&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;timestamp&#x27;: time.time(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;total_tests&#x27;: len(self.test_results),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;passed_tests&#x27;: sum(1 for result in self.test_results.values() if result),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;failed_tests&#x27;: sum(1 for result in self.test_results.values() if not result),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;test_results&#x27;: self.test_results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    test_suite = SafetyTestSuite()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        results = test_suite.run_all_tests()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        summary = test_suite.get_test_summary()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(f&quot;Safety Test Summary: {summary}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(f&quot;Error running safety tests: {e}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        test_suite.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="safety-documentation-and-procedures">Safety Documentation and Procedures<a href="#safety-documentation-and-procedures" class="hash-link" aria-label="Direct link to Safety Documentation and Procedures" title="Direct link to Safety Documentation and Procedures" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-safety-procedures-document">1. Creating Safety Procedures Document<a href="#1-creating-safety-procedures-document" class="hash-link" aria-label="Direct link to 1. Creating Safety Procedures Document" title="Direct link to 1. Creating Safety Procedures Document" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_sim_shared/docs/safety_procedures.md &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Safety Procedures for Isaac Sim AI-Robot Systems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Overview</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This document outlines the safety procedures for operating AI-robot systems in the Isaac Sim environment. These procedures ensure safe operation during development, testing, and validation phases.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Pre-Operation Safety Checks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 1. System Verification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Verify all safety monitoring systems are active</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Check that emergency stop functionality is operational</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Confirm sensor systems are providing valid data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Validate communication links are stable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Ensure battery levels are adequate (&gt;50%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 2. Environment Setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Verify simulation environment is properly configured</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Check that safety boundaries are defined</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Confirm obstacle detection systems are calibrated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [ ] Verify emergency stop zones are established</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Operational Safety Procedures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 1. Normal Operation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Monitor safety status continuously</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Watch for fault alerts or warnings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Maintain communication with the system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Be prepared to activate emergency stop if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 2. Emergency Procedures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If an unsafe condition is detected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. **Immediate Response**:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Activate emergency stop if system does not respond automatically</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Assess the situation and identify the cause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Document the incident with timestamps and sensor data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. **System Recovery**:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Allow system to complete any emergency procedures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Verify all systems have stopped safely</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Identify and resolve the root cause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - Reset safety systems before resuming operation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 3. Incident Reporting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All safety incidents must be documented:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Time and date of incident</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Conditions leading to incident</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- System response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Actions taken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Resolution and recovery steps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Safety System Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 1. Threshold Settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The following thresholds should be verified before operation:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Obstacle Distance**: Minimum 0.3m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Velocity Limits**: Linear ≤ 0.5 m/s, Angular ≤ 1.0 rad/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Battery Level**: Minimum 20% before shutdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Tilt Angle**: Maximum 30° from vertical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 2. Emergency Response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Immediate Stop**: When obstacle &lt; 0.15m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Warning**: When obstacle &lt; 0.5m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Speed Reduction**: When approaching boundaries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Fault Handling Procedures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 1. Sensor Faults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If a sensor fault is detected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Identify which sensor is affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Determine if the system can continue safely with reduced sensing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. If not, initiate safe shutdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Document the fault for analysis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 2. Communication Faults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If communication is lost:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. The system should automatically enter safe mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Attempt to reestablish communication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. If unsuccessful after timeout, initiate emergency stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Document the communication failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 3. Actuator Faults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">If actuator faults are detected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Stop all motion commands immediately</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Check for mechanical obstructions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Verify power and control signals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Initiate safe recovery if possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Training Requirements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 1. Operator Training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All operators must complete:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Safety system operation training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Emergency procedure training</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Incident reporting procedures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- System-specific safety protocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 2. Certification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Operators must be certified before unsupervised operation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Annual recertification required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Incident response drills conducted quarterly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Maintenance and Testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 1. Regular Testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Weekly: Basic safety system functionality test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Monthly: Full safety system validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Quarterly: Emergency procedure drills</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 2. Preventive Maintenance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Check sensor calibration monthly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Verify emergency stop functionality weekly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Update safety software as needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Document all maintenance activities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Documentation Requirements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 1. Safety Records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Maintain records of:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- All safety system tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Incident reports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Maintenance activities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Operator certifications</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 2. System Logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Continuous logging of safety-relevant data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Regular backup of safety logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Secure storage of safety records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Access control for safety data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Compliance and Standards</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This safety framework complies with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ISO 10218-1:2011 (Industrial robots - Safety requirements)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ISO/TS 15066:2016 (Collaborative robots)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ANSI/RIA R15.06 (Industrial robot safety)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Local safety regulations and standards</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Continuous Improvement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 1. Safety Reviews</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Monthly safety performance reviews</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Quarterly safety procedure updates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Annual safety framework assessment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 2. Feedback Integration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Operator feedback incorporation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Incident analysis integration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Best practice sharing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Technology update integration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Contact Information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For safety-related concerns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Safety Officer**: [Contact Information]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Technical Support**: [Contact Information]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Emergency Contact**: [Contact Information]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="testing-and-validation">Testing and Validation<a href="#testing-and-validation" class="hash-link" aria-label="Direct link to Testing and Validation" title="Direct link to Testing and Validation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-safety-framework-test-script">1. Creating Safety Framework Test Script<a href="#1-creating-safety-framework-test-script" class="hash-link" aria-label="Direct link to 1. Creating Safety Framework Test Script" title="Direct link to 1. Creating Safety Framework Test Script" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/test_safety_framework.sh &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test script for safety and reliability framework</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Testing Safety and Reliability Framework...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Source ROS environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source /opt/ros/humble/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source ~/isaac_ros_ws/install/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if safety framework package is available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Checking safety framework package...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 pkg list | grep safety_framework</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ $? -eq 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✓ Safety framework package found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Safety framework package not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check for safety configuration files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -f &quot;/workspace/shared_dir/configs/safety_config.yaml&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✓ Safety configuration file found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Safety configuration file not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check for safety procedures documentation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -f &quot;/workspace/shared_dir/docs/safety_procedures.md&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✓ Safety procedures documentation found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Safety procedures documentation not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build the safety framework package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Building safety framework package...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/isaac_ros_ws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">colcon build --packages-select isaac_safety_framework</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source install/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if launch files exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -f &quot;/workspace/shared_dir/src/isaac_safety_framework/launch/safety_framework.launch.py&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✓ Safety framework launch file found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Safety framework launch file not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test Python dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 -c &quot;import numpy; import rclpy; print(&#x27;✓ Required Python packages available&#x27;)&quot; || {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Required Python packages not available&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Installing required packages...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pip3 install numpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Safety and Reliability Framework test completed.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;To run the safety system, use:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;ros2 launch isaac_safety_framework safety_framework.launch.py&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Make executable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x ~/test_safety_framework.sh</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-running-safety-framework-test">2. Running Safety Framework Test<a href="#2-running-safety-framework-test" class="hash-link" aria-label="Direct link to 2. Running Safety Framework Test" title="Direct link to 2. Running Safety Framework Test" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~/test_safety_framework.sh</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting-safety-framework">Troubleshooting Safety Framework<a href="#troubleshooting-safety-framework" class="hash-link" aria-label="Direct link to Troubleshooting Safety Framework" title="Direct link to Troubleshooting Safety Framework" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-issues-and-solutions">Common Issues and Solutions<a href="#common-issues-and-solutions" class="hash-link" aria-label="Direct link to Common Issues and Solutions" title="Direct link to Common Issues and Solutions" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="issue-safety-monitor-not-responding-to-emergency-conditions">Issue: &quot;Safety monitor not responding to emergency conditions&quot;<a href="#issue-safety-monitor-not-responding-to-emergency-conditions" class="hash-link" aria-label="Direct link to Issue: &quot;Safety monitor not responding to emergency conditions&quot;" title="Direct link to Issue: &quot;Safety monitor not responding to emergency conditions&quot;" translate="no">​</a></h4>
<p><strong>Solution</strong>: Check sensor data and thresholds</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Verify sensor data is being published</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic echo /scan --field ranges | head -20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic echo /imu --field orientation | head -10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check safety parameter configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 param list | grep safety</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="issue-high-cpu-usage-from-safety-monitoring-nodes">Issue: &quot;High CPU usage from safety monitoring nodes&quot;<a href="#issue-high-cpu-usage-from-safety-monitoring-nodes" class="hash-link" aria-label="Direct link to Issue: &quot;High CPU usage from safety monitoring nodes&quot;" title="Direct link to Issue: &quot;High CPU usage from safety monitoring nodes&quot;" translate="no">​</a></h4>
<p><strong>Solution</strong>: Adjust monitoring frequency</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check current monitoring frequency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 node info /safety_monitor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 node info /reliability_monitor</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="issue-false-positive-fault-detections">Issue: &quot;False positive fault detections&quot;<a href="#issue-false-positive-fault-detections" class="hash-link" aria-label="Direct link to Issue: &quot;False positive fault detections&quot;" title="Direct link to Issue: &quot;False positive fault detections&quot;" translate="no">​</a></h4>
<p><strong>Solution</strong>: Calibrate fault detection thresholds</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Review current sensor data patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic hz /camera/color/image_raw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic hz /scan</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="verification-checklist">Verification Checklist<a href="#verification-checklist" class="hash-link" aria-label="Direct link to Verification Checklist" title="Direct link to Verification Checklist" translate="no">​</a></h2>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Safety monitoring node created and functional</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Reliability assessment system implemented</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Fault detection system created</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Safety configuration files created</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Safety procedures documented</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Launch files created for safety framework</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Safety test suite implemented</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Emergency stop functionality verified</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test script created and functional</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Troubleshooting guide reviewed</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps" translate="no">​</a></h2>
<p>After implementing the safety and reliability framework:</p>
<ol>
<li class=""><strong>Test safety systems</strong> with Isaac Sim running</li>
<li class=""><strong>Validate emergency procedures</strong> and responses</li>
<li class=""><strong>Calibrate safety thresholds</strong> based on operational requirements</li>
<li class=""><strong>Create safety assessment tools</strong> for students</li>
</ol>
<p>The safety and reliability framework is now configured and ready for Module 3, providing students with tools to ensure safe and reliable AI-robot system operation.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/chapter-3/safety-framework.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/chapter-3/communication-protocols"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">AI-Robot Communication Protocols for Isaac Sim</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/chapter-3/performance-monitoring"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Performance Monitoring Tools for Isaac Sim AI-Robot Systems</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#introduction-to-safety-and-reliability-in-ai-robotics" class="table-of-contents__link toc-highlight">Introduction to Safety and Reliability in AI-Robotics</a><ul><li><a href="#what-is-safety-and-reliability-in-ai-robotics" class="table-of-contents__link toc-highlight">What is Safety and Reliability in AI-Robotics?</a></li><li><a href="#key-safety-and-reliability-principles" class="table-of-contents__link toc-highlight">Key Safety and Reliability Principles</a></li></ul></li><li><a href="#safety-framework-components" class="table-of-contents__link toc-highlight">Safety Framework Components</a><ul><li><a href="#1-creating-safety-monitor-node" class="table-of-contents__link toc-highlight">1. Creating Safety Monitor Node</a></li><li><a href="#2-creating-reliability-monitor-node" class="table-of-contents__link toc-highlight">2. Creating Reliability Monitor Node</a></li></ul></li><li><a href="#fault-detection-and-recovery" class="table-of-contents__link toc-highlight">Fault Detection and Recovery</a><ul><li><a href="#1-creating-fault-detection-system" class="table-of-contents__link toc-highlight">1. Creating Fault Detection System</a></li></ul></li><li><a href="#safety-and-reliability-launch-files" class="table-of-contents__link toc-highlight">Safety and Reliability Launch Files</a><ul><li><a href="#1-creating-safety-framework-package" class="table-of-contents__link toc-highlight">1. Creating Safety Framework Package</a></li><li><a href="#2-creating-setup-files-for-safety-package" class="table-of-contents__link toc-highlight">2. Creating Setup Files for Safety Package</a></li><li><a href="#3-creating-safety-framework-launch-file" class="table-of-contents__link toc-highlight">3. Creating Safety Framework Launch File</a></li></ul></li><li><a href="#safety-configuration-and-policies" class="table-of-contents__link toc-highlight">Safety Configuration and Policies</a><ul><li><a href="#1-creating-safety-configuration-file" class="table-of-contents__link toc-highlight">1. Creating Safety Configuration File</a></li></ul></li><li><a href="#safety-testing-and-validation" class="table-of-contents__link toc-highlight">Safety Testing and Validation</a><ul><li><a href="#1-creating-safety-test-scripts" class="table-of-contents__link toc-highlight">1. Creating Safety Test Scripts</a></li></ul></li><li><a href="#safety-documentation-and-procedures" class="table-of-contents__link toc-highlight">Safety Documentation and Procedures</a><ul><li><a href="#1-creating-safety-procedures-document" class="table-of-contents__link toc-highlight">1. Creating Safety Procedures Document</a></li></ul></li><li><a href="#testing-and-validation" class="table-of-contents__link toc-highlight">Testing and Validation</a><ul><li><a href="#1-creating-safety-framework-test-script" class="table-of-contents__link toc-highlight">1. Creating Safety Framework Test Script</a></li><li><a href="#2-running-safety-framework-test" class="table-of-contents__link toc-highlight">2. Running Safety Framework Test</a></li></ul></li><li><a href="#troubleshooting-safety-framework" class="table-of-contents__link toc-highlight">Troubleshooting Safety Framework</a><ul><li><a href="#common-issues-and-solutions" class="table-of-contents__link toc-highlight">Common Issues and Solutions</a></li></ul></li><li><a href="#verification-checklist" class="table-of-contents__link toc-highlight">Verification Checklist</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Chapters</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Introduction</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/physical-ai-book/hackathon-book/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">Contributing</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/physical-ai-book/hackathon-book" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 AI-Native Textbook for Physical AI & Humanoid Robotics. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>