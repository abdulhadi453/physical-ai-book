<!doctype html>
<html lang="ur" dir="rtl" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chapter-3/sensor-integration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Multimodal Sensor Integration in Isaac Sim | AI-Native Textbook for Physical AI &amp; Humanoid Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://physical-ai-book.github.io/ur/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://physical-ai-book.github.io/ur/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://physical-ai-book.github.io/ur/docs/chapter-3/sensor-integration"><meta data-rh="true" property="og:locale" content="ur"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="ur"><meta data-rh="true" name="docsearch:language" content="ur"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Multimodal Sensor Integration in Isaac Sim | AI-Native Textbook for Physical AI &amp; Humanoid Robotics"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/ur/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://physical-ai-book.github.io/ur/docs/chapter-3/sensor-integration"><link data-rh="true" rel="alternate" href="https://physical-ai-book.github.io/docs/chapter-3/sensor-integration" hreflang="en"><link data-rh="true" rel="alternate" href="https://physical-ai-book.github.io/ur/docs/chapter-3/sensor-integration" hreflang="ur"><link data-rh="true" rel="alternate" href="https://physical-ai-book.github.io/docs/chapter-3/sensor-integration" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Multimodal Sensor Integration in Isaac Sim","item":"https://physical-ai-book.github.io/ur/docs/chapter-3/sensor-integration"}]}</script><link rel="alternate" type="application/rss+xml" href="/ur/blog/rss.xml" title="AI-Native Textbook for Physical AI &amp; Humanoid Robotics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ur/blog/atom.xml" title="AI-Native Textbook for Physical AI &amp; Humanoid Robotics Atom Feed"><link rel="stylesheet" href="/ur/assets/css/styles.00a4f8ad.css">
<script src="/ur/assets/js/runtime~main.1140a14f.js" defer="defer"></script>
<script src="/ur/assets/js/main.f6501a17.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ur/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ur/"><div class="navbar__logo"><img src="/ur/img/logo.svg" alt="Physical AI Book Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ur/img/logo.svg" alt="Physical AI Book Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Physical AI &amp; Humanoid Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ur/docs/intro">Chapters</a><a class="navbar__item navbar__link" href="/ur/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/physical-ai-book/hackathon-book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ur/docs/intro"><span title="Introduction to Physical AI &amp; Humanoid Robotics" class="linkLabel_WmDU">Introduction to Physical AI &amp; Humanoid Robotics</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ur/docs/chapter-1/intro"><span title="Module 1: The Robotic Nervous System (ROS 2)" class="categoryLinkLabel_W154">Module 1: The Robotic Nervous System (ROS 2)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ur/docs/chapter-2/intro"><span title="Module 2: The Digital Twin (Gazebo &amp; Unity)" class="categoryLinkLabel_W154">Module 2: The Digital Twin (Gazebo &amp; Unity)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/ur/docs/chapter-3/intro"><span title="Module 3: The AI-Robot Brain (NVIDIA Isaac™)" class="categoryLinkLabel_W154">Module 3: The AI-Robot Brain (NVIDIA Isaac™)</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ur/docs/chapter-3/intro"><span title="Chapter 3.1: NVIDIA Isaac Platform Integration" class="categoryLinkLabel_W154">Chapter 3.1: NVIDIA Isaac Platform Integration</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ur/docs/chapter-3/setup"><span title="Chapter 3.2: System Setup and Configuration" class="categoryLinkLabel_W154">Chapter 3.2: System Setup and Configuration</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ur/docs/chapter-3/perception-pipeline"><span title="Chapter 3.3: Advanced Implementation" class="categoryLinkLabel_W154">Chapter 3.3: Advanced Implementation</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/perception-pipeline"><span title="Isaac ROS Perception Pipeline Implementation" class="linkLabel_WmDU">Isaac ROS Perception Pipeline Implementation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ur/docs/chapter-3/sensor-integration"><span title="Multimodal Sensor Integration in Isaac Sim" class="linkLabel_WmDU">Multimodal Sensor Integration in Isaac Sim</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/model-deployment"><span title="AI Model Deployment in Isaac Sim Environment" class="linkLabel_WmDU">AI Model Deployment in Isaac Sim Environment</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/exercises"><span title="Module 3 Exercise Framework: The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Module 3 Exercise Framework: The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/assessments"><span title="Module 3 Assessments: The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Module 3 Assessments: The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/assessment"><span title="Module 3 Assessment: The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Module 3 Assessment: The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/progress-tracking-guide"><span title="Progress Tracking Guide: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Progress Tracking Guide: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/educator-guide"><span title="Educator Guide: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Educator Guide: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/researcher-resources"><span title="Researcher Resources: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Researcher Resources: Module 3 - The AI-Robot Brain (NVIDIA Isaac™)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/communication-protocols"><span title="AI-Robot Communication Protocols for Isaac Sim" class="linkLabel_WmDU">AI-Robot Communication Protocols for Isaac Sim</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/safety-framework"><span title="Safety and Reliability Framework for Isaac Sim AI-Robot Systems" class="linkLabel_WmDU">Safety and Reliability Framework for Isaac Sim AI-Robot Systems</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/performance-monitoring"><span title="Performance Monitoring Tools for Isaac Sim AI-Robot Systems" class="linkLabel_WmDU">Performance Monitoring Tools for Isaac Sim AI-Robot Systems</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ur/docs/chapter-3/summary"><span title="Module 3 Summary: The AI-Robot Brain (NVIDIA Isaac™)" class="linkLabel_WmDU">Module 3 Summary: The AI-Robot Brain (NVIDIA Isaac™)</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ur/docs/chapter-4/intro"><span title="Module 4: Vision-Language-Action (VLA) Systems" class="categoryLinkLabel_W154">Module 4: Vision-Language-Action (VLA) Systems</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ur/docs/contributing"><span title="Contributing" class="linkLabel_WmDU">Contributing</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ur/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Module 3: The AI-Robot Brain (NVIDIA Isaac™)</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Chapter 3.3: Advanced Implementation</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Multimodal Sensor Integration in Isaac Sim</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Multimodal Sensor Integration in Isaac Sim</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<p>This document provides comprehensive instructions for setting up multimodal sensor integration in the NVIDIA Isaac Sim environment for Module 3. The focus is on combining data from multiple sensors (camera, LiDAR, IMU, etc.) to create a comprehensive perception system for AI-robot applications.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction-to-multimodal-sensor-integration">Introduction to Multimodal Sensor Integration<a href="#introduction-to-multimodal-sensor-integration" class="hash-link" aria-label="Direct link to Introduction to Multimodal Sensor Integration" title="Direct link to Introduction to Multimodal Sensor Integration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-multimodal-sensor-integration">What is Multimodal Sensor Integration?<a href="#what-is-multimodal-sensor-integration" class="hash-link" aria-label="Direct link to What is Multimodal Sensor Integration?" title="Direct link to What is Multimodal Sensor Integration?" translate="no">​</a></h3>
<p>Multimodal sensor integration combines data from multiple sensors to create a more complete and accurate understanding of the environment. In the context of Isaac Sim and ROS 2, this involves:</p>
<ul>
<li class="">Synchronizing data from different sensor types</li>
<li class="">Fusing sensor data for enhanced perception</li>
<li class="">Managing sensor calibration and transformations</li>
<li class="">Implementing sensor fusion algorithms</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-sensor-types-in-isaac-sim">Key Sensor Types in Isaac Sim<a href="#key-sensor-types-in-isaac-sim" class="hash-link" aria-label="Direct link to Key Sensor Types in Isaac Sim" title="Direct link to Key Sensor Types in Isaac Sim" translate="no">​</a></h3>
<ol>
<li class=""><strong>Camera</strong>: Visual information for object detection and recognition</li>
<li class=""><strong>LiDAR</strong>: 3D spatial information for mapping and obstacle detection</li>
<li class=""><strong>IMU</strong>: Inertial measurements for orientation and motion</li>
<li class=""><strong>Depth Camera</strong>: Depth information for 3D scene understanding</li>
<li class=""><strong>GPS</strong>: Position information for outdoor navigation</li>
<li class=""><strong>Encoders</strong>: Wheel odometry for motion tracking</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h2>
<p>Before setting up multimodal sensor integration, ensure you have:</p>
<ul>
<li class="">Completed Isaac Sim and Isaac ROS setup</li>
<li class="">Basic understanding of ROS 2 topics and messages</li>
<li class="">Familiarity with sensor message types (sensor_msgs)</li>
<li class="">TF (Transform) knowledge for coordinate frame management</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="isaac-sim-sensor-configuration">Isaac Sim Sensor Configuration<a href="#isaac-sim-sensor-configuration" class="hash-link" aria-label="Direct link to Isaac Sim Sensor Configuration" title="Direct link to Isaac Sim Sensor Configuration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-multimodal-robot-configuration">1. Creating Multimodal Robot Configuration<a href="#1-creating-multimodal-robot-configuration" class="hash-link" aria-label="Direct link to 1. Creating Multimodal Robot Configuration" title="Direct link to 1. Creating Multimodal Robot Configuration" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_sim_shared/robots/multimodal_robot.usd &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#usda 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doc = &quot;&quot;&quot;Multimodal sensor robot configuration for Isaac Sim&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metersPerUnit = 0.01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    upAxis = &quot;Y&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def Xform &quot;MultimodalRobot&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def Xform &quot;Chassis&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Cube &quot;Base&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0, 0, 0.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:scale = (0.5, 0.3, 0.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def Xform &quot;Wheels&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Cylinder &quot;FrontLeftWheel&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0.15, 0.15, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float radius = 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float height = 0.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:rotateXYZ = (90, 0, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Cylinder &quot;FrontRightWheel&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0.15, -0.15, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float radius = 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float height = 0.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:rotateXYZ = (90, 0, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Cylinder &quot;BackLeftWheel&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (-0.15, 0.15, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float radius = 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float height = 0.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:rotateXYZ = (90, 0, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Cylinder &quot;BackRightWheel&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (-0.15, -0.15, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float radius = 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float height = 0.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:rotateXYZ = (90, 0, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def Xform &quot;Sensors&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # RGB Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Camera &quot;RGB_Camera&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0.2, 0, 0.15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 clampingRange = (0.1, 100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float focalLength = 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float horizontalAperture = 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float verticalAperture = 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Depth Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Camera &quot;Depth_Camera&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0.2, 0, 0.15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 clampingRange = (0.1, 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float focalLength = 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # 360-degree LiDAR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def RotatingLidar &quot;360Lidar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0.18, 0, 0.19)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # IMU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Imu &quot;IMU&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0, 0, 0.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # GPS (simulated)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def UsdGeomGps &quot;GPS&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0, 0, 0.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Wheel encoders (simulated)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def UsdGeomWheelEncoder &quot;WheelEncoders&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0, 0, 0.05)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def Xform &quot;Links&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Define coordinate frames for TF tree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Xform &quot;base_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Robot base coordinate frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Xform &quot;camera_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0.2, 0, 0.15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Xform &quot;lidar_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0.18, 0, 0.19)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Xform &quot;imu_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0, 0, 0.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Xform &quot;gps_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            float3 xformOp:translate = (0, 0, 0.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Xform &quot;odom&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Odometry frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def Xform &quot;map&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Map frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-creating-sensor-configuration-file">2. Creating Sensor Configuration File<a href="#2-creating-sensor-configuration-file" class="hash-link" aria-label="Direct link to 2. Creating Sensor Configuration File" title="Direct link to 2. Creating Sensor Configuration File" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_sim_shared/configs/sensor_config.yaml &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Multimodal Sensor Configuration for Isaac Sim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Camera Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">camera:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rgb:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    topic: &quot;/camera/color/image_raw&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    info_topic: &quot;/camera/color/camera_info&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    width: 640</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height: 480</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fps: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fov: 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    frame_id: &quot;camera_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_distortion: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color_correct: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depth:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    topic: &quot;/camera/depth/image_rect_raw&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    info_topic: &quot;/camera/depth/camera_info&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    width: 640</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height: 480</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fps: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fov: 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    frame_id: &quot;camera_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_noise: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    noise_params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      mean: 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      stddev: 0.001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># LiDAR Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lidar:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  topic: &quot;/scan&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  samples: 360</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  range_min: 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  range_max: 25.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fov: 360</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fps: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame_id: &quot;lidar_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_noise: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  noise_params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mean: 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stddev: 0.01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># IMU Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imu:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  topic: &quot;/imu&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame_id: &quot;imu_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rate: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_noise: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  noise_params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accelerometer_noise_density: 0.001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gyroscope_noise_density: 0.0001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># GPS Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  topic: &quot;/gps/fix&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame_id: &quot;gps_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rate: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_noise: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  noise_params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    horizontal_accuracy: 2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vertical_accuracy: 4.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Wheel Encoder Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wheel_encoders:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  left_topic: &quot;/left_wheel/encoder&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  right_topic: &quot;/right_wheel/encoder&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frame_id: &quot;base_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rate: 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ticks_per_revolution: 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wheel_radius: 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wheel_separation: 0.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># TF Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  publish_tf: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tf_prefix: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  odom_frame: &quot;odom&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base_frame: &quot;base_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  map_frame: &quot;map&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  publish_frequency: 50.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Sensor Synchronization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">synchronization:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_sync: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sync_method: &quot;approximate_time&quot;  # or &quot;exact_time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sync_queue_size: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  max_interval_seconds: 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor-data-synchronization">Sensor Data Synchronization<a href="#sensor-data-synchronization" class="hash-link" aria-label="Direct link to Sensor Data Synchronization" title="Direct link to Sensor Data Synchronization" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-sensor-synchronization-node">1. Creating Sensor Synchronization Node<a href="#1-creating-sensor-synchronization-node" class="hash-link" aria-label="Direct link to 1. Creating Sensor Synchronization Node" title="Direct link to 1. Creating Sensor Synchronization Node" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_sensor_fusion/sensor_fusion/sensor_synchronizer.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sensor_msgs.msg import Image, LaserScan, Imu, NavSatFix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import Twist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from message_filters import ApproximateTimeSynchronizer, Subscriber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from tf2_ros import TransformListener, Buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from scipy.spatial.transform import Rotation as R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import threading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SensorSynchronizer(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;sensor_synchronizer&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize data storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gps_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize TF buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tf_buffer = Buffer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tf_listener = TransformListener(self.tf_buffer, self)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create subscribers for each sensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_sub = Subscriber(self, Image, &#x27;/camera/color/image_raw&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_sub = Subscriber(self, LaserScan, &#x27;/scan&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_sub = Subscriber(self, Imu, &#x27;/imu&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gps_sub = Subscriber(self, NavSatFix, &#x27;/gps/fix&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Synchronize sensor data with approximate time synchronization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.sync = ApproximateTimeSynchronizer(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [self.camera_sub, self.lidar_sub, self.imu_sub, self.gps_sub],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            queue_size=10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            slop=0.1  # 100ms tolerance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.sync.registerCallback(self.synchronized_callback)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publisher for fused sensor data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fused_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Twist,  # Using Twist as a placeholder; in practice, you&#x27;d create a custom message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/fused_sensor_data&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publisher for sensor status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.status_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Twist,  # Using Twist as a placeholder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/sensor_status&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Sensor status tracking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.sensor_status = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;camera&#x27;: False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;lidar&#x27;: False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;imu&#x27;: False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;gps&#x27;: False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Status timer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.status_timer = self.create_timer(1.0, self.publish_status)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Sensor Synchronizer initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def synchronized_callback(self, camera_msg, lidar_msg, imu_msg, gps_msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Callback for synchronized sensor data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Update sensor status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.sensor_status[&#x27;camera&#x27;] = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.sensor_status[&#x27;lidar&#x27;] = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.sensor_status[&#x27;imu&#x27;] = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.sensor_status[&#x27;gps&#x27;] = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Process synchronized data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_data = camera_msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.lidar_data = lidar_msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_data = imu_msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.gps_data = gps_msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Perform basic fusion (placeholder implementation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fused_data = self.perform_basic_fusion()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Publish fused data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.fused_publisher.publish(fused_data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().info(f&#x27;Synchronized data: Camera {camera_msg.header.stamp.sec}, &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 f&#x27;Lidar {lidar_msg.header.stamp.sec}, &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 f&#x27;IMU {imu_msg.header.stamp.sec}, &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 f&#x27;GPS {gps_msg.header.stamp.sec}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error in synchronized callback: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def perform_basic_fusion(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Perform basic sensor fusion&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # This is a placeholder implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # In practice, you would implement more sophisticated fusion algorithms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fused_msg = Twist()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Example: combine IMU orientation with GPS position for pose estimation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.imu_data and self.gps_data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Extract orientation from IMU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            imu_orientation = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.imu_data.orientation.x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.imu_data.orientation.y,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.imu_data.orientation.z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.imu_data.orientation.w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Extract position from GPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            gps_position = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.gps_data.latitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.gps_data.longitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.gps_data.altitude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Combine in a meaningful way (simplified example)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fused_msg.angular.x = imu_orientation[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fused_msg.angular.y = imu_orientation[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fused_msg.angular.z = imu_orientation[2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fused_msg.linear.x = gps_position[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fused_msg.linear.y = gps_position[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fused_msg.linear.z = gps_position[2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return fused_msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def publish_status(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Publish sensor status&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status_msg = Twist()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status_msg.linear.x = 1.0 if self.sensor_status[&#x27;camera&#x27;] else 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status_msg.linear.y = 1.0 if self.sensor_status[&#x27;lidar&#x27;] else 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status_msg.linear.z = 1.0 if self.sensor_status[&#x27;imu&#x27;] else 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status_msg.angular.x = 1.0 if self.sensor_status[&#x27;gps&#x27;] else 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.status_publisher.publish(status_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Reset status for next cycle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.sensor_status = {k: False for k in self.sensor_status.keys()}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    synchronizer = SensorSynchronizer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.spin(synchronizer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronizer.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor-fusion-implementation">Sensor Fusion Implementation<a href="#sensor-fusion-implementation" class="hash-link" aria-label="Direct link to Sensor Fusion Implementation" title="Direct link to Sensor Fusion Implementation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-sensor-fusion-package">1. Creating Sensor Fusion Package<a href="#1-creating-sensor-fusion-package" class="hash-link" aria-label="Direct link to 1. Creating Sensor Fusion Package" title="Direct link to 1. Creating Sensor Fusion Package" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/isaac_ros_ws/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source /opt/ros/humble/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create sensor fusion package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 pkg create --build-type ament_python isaac_sensor_fusion --dependencies rclpy sensor_msgs geometry_msgs message_filters tf2_ros tf2_geometry_msgs std_msgs</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-creating-advanced-sensor-fusion-node">2. Creating Advanced Sensor Fusion Node<a href="#2-creating-advanced-sensor-fusion-node" class="hash-link" aria-label="Direct link to 2. Creating Advanced Sensor Fusion Node" title="Direct link to 2. Creating Advanced Sensor Fusion Node" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_sensor_fusion/sensor_fusion/advanced_sensor_fusion.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sensor_msgs.msg import Image, LaserScan, Imu, NavSatFix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import PoseWithCovarianceStamped, Twist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from nav_msgs.msg import Odometry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from tf2_ros import TransformListener, Buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from tf2_geometry_msgs import do_transform_pose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from scipy.spatial.transform import Rotation as R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from collections import deque</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import threading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from typing import Dict, List, Tuple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class AdvancedSensorFusion(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;advanced_sensor_fusion&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize data buffers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_buffer = deque(maxlen=10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_buffer = deque(maxlen=10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_buffer = deque(maxlen=50)  # Higher frequency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gps_buffer = deque(maxlen=10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize TF buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tf_buffer = Buffer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tf_listener = TransformListener(self.tf_buffer, self)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create subscribers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Image,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/camera/color/image_raw&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LaserScan,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/scan&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.lidar_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Imu,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/imu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gps_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            NavSatFix,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/gps/fix&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.gps_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publishers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fused_pose_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            PoseWithCovarianceStamped,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/fused_pose&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.odom_publisher = self.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Odometry,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/fused_odom&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize state estimation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.position = np.array([0.0, 0.0, 0.0])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.orientation = R.from_quat([0, 0, 0, 1])  # Identity quaternion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.velocity = np.array([0.0, 0.0, 0.0])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.angular_velocity = np.array([0.0, 0.0, 0.0])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Covariance matrices (placeholder values)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.position_covariance = np.eye(3) * 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.orientation_covariance = np.eye(3) * 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update timer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.update_timer = self.create_timer(0.05, self.update_fusion)  # 20 Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Advanced Sensor Fusion node initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def camera_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Handle camera data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_buffer.append(msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def lidar_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Handle LiDAR data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_buffer.append(msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def imu_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Handle IMU data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_buffer.append(msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def gps_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Handle GPS data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gps_buffer.append(msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def update_fusion(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Update fused state estimate&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Get latest sensor data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            latest_imu = self.imu_buffer[-1] if self.imu_buffer else None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            latest_gps = self.gps_buffer[-1] if self.gps_buffer else None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if latest_imu:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Update orientation from IMU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                imu_quat = np.array([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    latest_imu.orientation.x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    latest_imu.orientation.y,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    latest_imu.orientation.z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    latest_imu.orientation.w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Normalize quaternion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                imu_quat = imu_quat / np.linalg.norm(imu_quat)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Update orientation (simple approach, in practice use more sophisticated fusion)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.orientation = R.from_quat(imu_quat)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if latest_gps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Convert GPS to local coordinates (simplified)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # In practice, you&#x27;d use a proper coordinate transformation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lat_diff = latest_gps.latitude - 0.0  # Reference latitude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lon_diff = latest_gps.longitude - 0.0  # Reference longitude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Convert to meters (approximate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lat_to_meters = 111320.0  # meters per degree at equator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                x = lon_diff * lat_to_meters * np.cos(np.radians(latest_gps.latitude))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                y = lat_diff * lat_to_meters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                z = latest_gps.altitude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Update position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.position = np.array([x, y, z])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Create and publish fused pose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.publish_fused_pose()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error in fusion update: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def publish_fused_pose(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Publish the fused pose estimate&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Create PoseWithCovarianceStamped message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg = PoseWithCovarianceStamped()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.header.stamp = self.get_clock().now().to_msg()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.header.frame_id = &quot;map&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Set position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.pose.pose.position.x = float(self.position[0])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.pose.pose.position.y = float(self.position[1])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.pose.pose.position.z = float(self.position[2])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Set orientation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            quat = self.orientation.as_quat()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.pose.pose.orientation.x = float(quat[0])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.pose.pose.orientation.y = float(quat[1])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.pose.pose.orientation.z = float(quat[2])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.pose.pose.orientation.w = float(quat[3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Set covariance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            covariance = np.zeros(36)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            covariance[0] = self.position_covariance[0, 0]  # x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            covariance[7] = self.position_covariance[1, 1]  # y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            covariance[14] = self.position_covariance[2, 2]  # z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            covariance[21] = self.orientation_covariance[0, 0]  # rx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            covariance[28] = self.orientation_covariance[1, 1]  # ry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            covariance[35] = self.orientation_covariance[2, 2]  # rz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pose_msg.pose.covariance = covariance.tolist()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.fused_pose_publisher.publish(pose_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Also publish as odometry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            odom_msg = Odometry()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            odom_msg.header = pose_msg.header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            odom_msg.child_frame_id = &quot;base_link&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            odom_msg.pose = pose_msg.pose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.odom_publisher.publish(odom_msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error publishing fused pose: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def get_fusion_status(self) -&gt; Dict:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Get status of sensor fusion&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;camera_buffer_size&#x27;: len(self.camera_buffer),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;lidar_buffer_size&#x27;: len(self.lidar_buffer),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;imu_buffer_size&#x27;: len(self.imu_buffer),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;gps_buffer_size&#x27;: len(self.gps_buffer),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;position&#x27;: self.position.tolist(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;orientation&#x27;: self.orientation.as_quat().tolist()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fusion_node = AdvancedSensorFusion()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.spin(fusion_node)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status = fusion_node.get_fusion_status()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(f&quot;Final fusion status: {status}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fusion_node.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="tf-transform-configuration">TF (Transform) Configuration<a href="#tf-transform-configuration" class="hash-link" aria-label="Direct link to TF (Transform) Configuration" title="Direct link to TF (Transform) Configuration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-static-transform-publisher">1. Creating Static Transform Publisher<a href="#1-creating-static-transform-publisher" class="hash-link" aria-label="Direct link to 1. Creating Static Transform Publisher" title="Direct link to 1. Creating Static Transform Publisher" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_sensor_fusion/sensor_fusion/static_transform_publisher.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from tf2_ros import StaticTransformBroadcaster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import TransformStamped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class StaticTransformPublisher(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;static_transform_publisher&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create static transform broadcaster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tf_static_broadcaster = StaticTransformBroadcaster(self)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Publish static transforms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.publish_static_transforms()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Static Transform Publisher initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def publish_static_transforms(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Publish static transforms between sensor frames&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transforms = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Transform from base_link to camera_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t = TransformStamped()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.header.stamp = self.get_clock().now().to_msg()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.header.frame_id = &#x27;base_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.child_frame_id = &#x27;camera_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.x = 0.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.y = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.z = 0.15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.x = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.y = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.z = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.w = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transforms.append(t)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Transform from base_link to lidar_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t = TransformStamped()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.header.stamp = self.get_clock().now().to_msg()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.header.frame_id = &#x27;base_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.child_frame_id = &#x27;lidar_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.x = 0.18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.y = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.z = 0.19</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.x = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.y = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.z = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.w = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transforms.append(t)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Transform from base_link to imu_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t = TransformStamped()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.header.stamp = self.get_clock().now().to_msg()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.header.frame_id = &#x27;base_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.child_frame_id = &#x27;imu_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.x = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.y = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.z = 0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.x = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.y = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.z = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.w = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transforms.append(t)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Transform from base_link to gps_link</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t = TransformStamped()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.header.stamp = self.get_clock().now().to_msg()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.header.frame_id = &#x27;base_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.child_frame_id = &#x27;gps_link&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.x = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.y = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.translation.z = 0.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.x = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.y = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.z = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t.transform.rotation.w = 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transforms.append(t)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Send all transforms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for transform in transforms:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tf_static_broadcaster.sendTransform(transform)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    publisher = StaticTransformPublisher()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Keep the node alive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.spin(publisher)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        publisher.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor-integration-launch-files">Sensor Integration Launch Files<a href="#sensor-integration-launch-files" class="hash-link" aria-label="Direct link to Sensor Integration Launch Files" title="Direct link to Sensor Integration Launch Files" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-launch-directory-and-files">1. Creating Launch Directory and Files<a href="#1-creating-launch-directory-and-files" class="hash-link" aria-label="Direct link to 1. Creating Launch Directory and Files" title="Direct link to 1. Creating Launch Directory and Files" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/isaac_ros_ws/src/isaac_sensor_fusion/launch</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-creating-sensor-integration-launch-file">2. Creating Sensor Integration Launch File<a href="#2-creating-sensor-integration-launch-file" class="hash-link" aria-label="Direct link to 2. Creating Sensor Integration Launch File" title="Direct link to 2. Creating Sensor Integration Launch File" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_ros_ws/src/isaac_sensor_fusion/launch/sensor_integration.launch.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch import LaunchDescription</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch.actions import DeclareLaunchArgument, TimerAction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch.substitutions import LaunchConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from launch_ros.actions import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from ament_index_python.packages import get_package_share_directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def generate_launch_description():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Launch arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_sim_time = LaunchConfiguration(&#x27;use_sim_time&#x27;, default=&#x27;true&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Static transform publisher node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_transform_publisher = Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package=&#x27;isaac_sensor_fusion&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable=&#x27;static_transform_publisher&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name=&#x27;static_transform_publisher&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parameters=[{&#x27;use_sim_time&#x27;: use_sim_time}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output=&#x27;screen&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Sensor synchronizer node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sensor_synchronizer = Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package=&#x27;isaac_sensor_fusion&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable=&#x27;sensor_synchronizer&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name=&#x27;sensor_synchronizer&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parameters=[{&#x27;use_sim_time&#x27;: use_sim_time}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output=&#x27;screen&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Advanced sensor fusion node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    advanced_fusion = Node(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        package=&#x27;isaac_sensor_fusion&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executable=&#x27;advanced_sensor_fusion&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name=&#x27;advanced_sensor_fusion&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parameters=[{&#x27;use_sim_time&#x27;: use_sim_time}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output=&#x27;screen&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Return launch description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld = LaunchDescription()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Add launch arguments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(DeclareLaunchArgument(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;use_sim_time&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        default_value=&#x27;true&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description=&#x27;Use simulation (Isaac Sim) clock if true&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Add nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(static_transform_publisher)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(TimerAction(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        period=2.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actions=[sensor_synchronizer]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.add_action(TimerAction(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        period=3.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actions=[advanced_fusion]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return ld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor-calibration-and-validation">Sensor Calibration and Validation<a href="#sensor-calibration-and-validation" class="hash-link" aria-label="Direct link to Sensor Calibration and Validation" title="Direct link to Sensor Calibration and Validation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-sensor-calibration-tools">1. Creating Sensor Calibration Tools<a href="#1-creating-sensor-calibration-tools" class="hash-link" aria-label="Direct link to 1. Creating Sensor Calibration Tools" title="Direct link to 1. Creating Sensor Calibration Tools" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_sim_shared/scripts/sensor_calibration.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sensor_msgs.msg import Image, LaserScan, Imu, CameraInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import PointStamped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from cv_bridge import CvBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from scipy.spatial.transform import Rotation as R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SensorCalibrator(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;sensor_calibrator&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize CV bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.bridge = CvBridge()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Subscribe to sensors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Image,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/camera/color/image_raw&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_info_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            CameraInfo,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/camera/color/camera_info&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_info_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LaserScan,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/scan&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.lidar_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Imu,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/imu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Data storage for calibration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_info = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.calibration_data = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.calibration_samples = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.max_samples = 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Sensor Calibrator initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def camera_info_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Store camera info for calibration&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_info = msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def camera_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Process camera data for calibration&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Convert to OpenCV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cv_image = self.bridge.imgmsg_to_cv2(msg, &quot;bgr8&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # For calibration, we typically look for calibration patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # In this example, we&#x27;ll look for checkerboard patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            gray = cv2.cvtColor(cv_image, cv2.COLOR_BGR2GRAY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Look for checkerboard pattern (9x6 corners)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ret, corners = cv2.findChessboardCorners(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                gray, (9, 6),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                cv2.CALIB_CB_ADAPTIVE_THRESH + cv2.CALIB_CB_FAST_CHECK + cv2.CALIB_CB_NORMALIZE_IMAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if ret and self.calibration_samples &lt; self.max_samples:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Refine corner positions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                corners_refined = cv2.cornerSubPix(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    gray, corners, (11, 11), (-1, -1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    criteria=(cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 30, 0.001)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Store calibration data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.calibration_data.append({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &#x27;image&#x27;: cv_image,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &#x27;corners&#x27;: corners_refined,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &#x27;timestamp&#x27;: msg.header.stamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.calibration_samples += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.get_logger().info(f&#x27;Calibration sample {self.calibration_samples}/{self.max_samples}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if self.calibration_samples &gt;= self.max_samples:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.perform_calibration()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error in camera callback: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def lidar_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Process LiDAR data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Store LiDAR data for fusion validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def imu_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Process IMU data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Store IMU data for fusion validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def perform_calibration(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Perform camera calibration&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if len(self.calibration_data) &lt; 10:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().warn(&#x27;Not enough calibration samples collected&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Prepare object points (3D points in real world space)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objp = np.zeros((9*6, 3), np.float32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objp[:, :2] = np.mgrid[0:9, 0:6].T.reshape(-1, 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Arrays to store object points and image points from all images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        objpoints = []  # 3D points in real world space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        imgpoints = []  # 2D points in image plane</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for data in self.calibration_data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Only use data where corners were detected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if data[&#x27;corners&#x27;] is not None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                objpoints.append(objp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                imgpoints.append(data[&#x27;corners&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if len(objpoints) &lt; 10:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().warn(&#x27;Not enough valid calibration samples&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Perform calibration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ret, mtx, dist, rvecs, tvecs = cv2.calibrateCamera(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            objpoints, imgpoints,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            (self.camera_info.width, self.camera_info.height),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            None, None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if ret:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Save calibration results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            calibration_data = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;camera_matrix&#x27;: mtx.tolist(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;distortion_coefficients&#x27;: dist.tolist(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;image_width&#x27;: self.camera_info.width,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;image_height&#x27;: self.camera_info.height,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;samples_used&#x27;: len(objpoints)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Save to file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            with open(&#x27;/workspace/shared_dir/calibration/camera_calibration.yaml&#x27;, &#x27;w&#x27;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                yaml.dump(calibration_data, f, default_flow_style=False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().info(f&#x27;Camera calibration completed. Reprojection error: {ret}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().info(f&#x27;Calibration saved to /workspace/shared_dir/calibration/camera_calibration.yaml&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(&#x27;Camera calibration failed&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def validate_sensor_fusion(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Validate sensor fusion quality&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # This would implement validation of sensor fusion accuracy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # by comparing fused estimates to ground truth in simulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calibrator = SensorCalibrator()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.spin(calibrator)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        calibrator.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor-data-visualization">Sensor Data Visualization<a href="#sensor-data-visualization" class="hash-link" aria-label="Direct link to Sensor Data Visualization" title="Direct link to Sensor Data Visualization" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-sensor-data-visualization-script">1. Creating Sensor Data Visualization Script<a href="#1-creating-sensor-data-visualization-script" class="hash-link" aria-label="Direct link to 1. Creating Sensor Data Visualization Script" title="Direct link to 1. Creating Sensor Data Visualization Script" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/isaac_sim_shared/scripts/sensor_visualization.py &lt;&lt; &#x27;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from rclpy.node import Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from sensor_msgs.msg import Image, LaserScan, Imu, PointCloud2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from geometry_msgs.msg import PoseStamped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from cv_bridge import CvBridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import matplotlib.pyplot as plt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from matplotlib.animation import FuncAnimation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import threading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SensorVisualizer(Node):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().__init__(&#x27;sensor_visualizer&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize CV bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.bridge = CvBridge()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Data storage for visualization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_data = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fused_pose = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Subscribe to sensors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Image,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/camera/color/image_raw&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LaserScan,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/scan&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.lidar_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Imu,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/imu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.pose_subscription = self.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            PoseStamped,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/fused_pose&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.pose_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Visualization setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fig, self.axs = plt.subplots(2, 2, figsize=(12, 10))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lidar_line, = self.axs[0, 0].plot([], [], &#x27;b.&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.axs[0, 0].set_title(&#x27;LiDAR Scan&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.axs[0, 0].set_xlim(-10, 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.axs[0, 0].set_ylim(-10, 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.axs[0, 0].grid(True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_ax = self.axs[0, 1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_ax.set_title(&#x27;IMU Data&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.imu_ax.set_ylim(-10, 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.pose_ax = self.axs[1, 0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.pose_ax.set_title(&#x27;Robot Pose&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.pose_ax.set_xlim(-5, 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.pose_ax.set_ylim(-5, 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.pose_ax.grid(True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_ax = self.axs[1, 1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_ax.set_title(&#x27;Camera Image&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Start visualization thread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.viz_thread = threading.Thread(target=self.run_visualization)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.viz_thread.daemon = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.viz_thread.start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.get_logger().info(&#x27;Sensor Visualizer initialized&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def camera_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Store camera data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_data = self.bridge.imgmsg_to_cv2(msg, &quot;bgr8&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error converting camera image: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def lidar_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Store LiDAR data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Convert LiDAR scan to x,y coordinates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            angles = np.array([msg.angle_min + i * msg.angle_increment for i in range(len(msg.ranges))])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ranges = np.array(msg.ranges)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Filter out invalid ranges</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            valid_indices = (ranges &gt;= msg.range_min) &amp; (ranges &lt;= msg.range_max)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            valid_angles = angles[valid_indices]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            valid_ranges = ranges[valid_indices]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Convert to Cartesian coordinates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x = valid_ranges * np.cos(valid_angles)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            y = valid_ranges * np.sin(valid_angles)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.lidar_data = (x, y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error processing LiDAR data: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def imu_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Store IMU data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_data = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;linear_acceleration&#x27;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.linear_acceleration.x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.linear_acceleration.y,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.linear_acceleration.z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;angular_velocity&#x27;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.angular_velocity.x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.angular_velocity.y,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.angular_velocity.z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;orientation&#x27;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.orientation.x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.orientation.y,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.orientation.z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    msg.orientation.w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error processing IMU data: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def pose_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Store fused pose data&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.fused_pose = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;x&#x27;: msg.pose.position.x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;y&#x27;: msg.pose.position.y,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;z&#x27;: msg.pose.position.z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;qx&#x27;: msg.pose.orientation.x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;qy&#x27;: msg.pose.orientation.y,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;qz&#x27;: msg.pose.orientation.z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &#x27;qw&#x27;: msg.pose.orientation.w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error processing pose data: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def update_visualization(self, frame):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Update visualization plots&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update LiDAR plot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.lidar_data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x, y = self.lidar_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.lidar_line.set_data(x, y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update IMU plot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.imu_data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            acc = self.imu_data[&#x27;linear_acceleration&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_ax.clear()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_ax.plot(acc, &#x27;b-&#x27;, label=&#x27;Linear Acc&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_ax.set_title(&#x27;IMU Data&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_ax.legend()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.imu_ax.grid(True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update pose plot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.fused_pose:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x = self.fused_pose[&#x27;x&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            y = self.fused_pose[&#x27;y&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.pose_ax.plot(x, y, &#x27;ro&#x27;, markersize=10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.pose_ax.set_title(f&#x27;Robot Pose: ({x:.2f}, {y:.2f})&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update camera plot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if self.camera_data is not None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_ax.clear()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_ax.imshow(self.camera_data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_ax.set_title(&#x27;Camera Image&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.camera_ax.axis(&#x27;off&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return self.lidar_line,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def run_visualization(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;Run the visualization in a separate thread&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ani = FuncAnimation(self.fig, self.update_visualization, interval=100, blit=False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            plt.tight_layout()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            plt.show()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        except Exception as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.get_logger().error(f&#x27;Error in visualization: {e}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main(args=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy.init(args=args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    visualizer = SensorVisualizer()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.spin(visualizer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        plt.close(&#x27;all&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finally:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        visualizer.destroy_node()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rclpy.shutdown()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="testing-and-validation">Testing and Validation<a href="#testing-and-validation" class="hash-link" aria-label="Direct link to Testing and Validation" title="Direct link to Testing and Validation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-creating-sensor-integration-test-script">1. Creating Sensor Integration Test Script<a href="#1-creating-sensor-integration-test-script" class="hash-link" aria-label="Direct link to 1. Creating Sensor Integration Test Script" title="Direct link to 1. Creating Sensor Integration Test Script" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ~/test_sensor_integration.sh &lt;&lt; &#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test script for multimodal sensor integration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Testing Multimodal Sensor Integration...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Source ROS environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source /opt/ros/humble/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source ~/isaac_ros_ws/install/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if sensor fusion package is available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Checking sensor fusion package...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 pkg list | grep sensor_fusion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ $? -eq 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✓ Sensor fusion package found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Sensor fusion package not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check for sensor configuration files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -f &quot;/workspace/shared_dir/configs/sensor_config.yaml&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✓ Sensor configuration file found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Sensor configuration file not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check for multimodal robot configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -f &quot;/workspace/shared_dir/robots/multimodal_robot.usd&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✓ Multimodal robot configuration found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Multimodal robot configuration not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build the sensor fusion package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Building sensor fusion package...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/isaac_ros_ws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">colcon build --packages-select isaac_sensor_fusion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source install/setup.bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if launch files exist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -f &quot;/workspace/shared_dir/src/isaac_sensor_fusion/launch/sensor_integration.launch.py&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✓ Sensor integration launch file found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;✗ Sensor integration launch file not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test sensor topics are available (when Isaac Sim is running)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Sensor integration test completed.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;To fully test, run Isaac Sim and launch the sensor integration system:&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;ros2 launch isaac_sensor_fusion sensor_integration.launch.py&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Make executable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x ~/test_sensor_integration.sh</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-running-sensor-integration-test">2. Running Sensor Integration Test<a href="#2-running-sensor-integration-test" class="hash-link" aria-label="Direct link to 2. Running Sensor Integration Test" title="Direct link to 2. Running Sensor Integration Test" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~/test_sensor_integration.sh</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting-sensor-integration">Troubleshooting Sensor Integration<a href="#troubleshooting-sensor-integration" class="hash-link" aria-label="Direct link to Troubleshooting Sensor Integration" title="Direct link to Troubleshooting Sensor Integration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-issues-and-solutions">Common Issues and Solutions<a href="#common-issues-and-solutions" class="hash-link" aria-label="Direct link to Common Issues and Solutions" title="Direct link to Common Issues and Solutions" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="issue-sensor-data-not-synchronizing-properly">Issue: &quot;Sensor data not synchronizing properly&quot;<a href="#issue-sensor-data-not-synchronizing-properly" class="hash-link" aria-label="Direct link to Issue: &quot;Sensor data not synchronizing properly&quot;" title="Direct link to Issue: &quot;Sensor data not synchronizing properly&quot;" translate="no">​</a></h4>
<p><strong>Solution</strong>: Check timing and buffer sizes</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Verify sensor topics are publishing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic echo /camera/color/image_raw --field header.stamp --field height --field width &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic echo /scan --field header.stamp --field ranges.size &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic echo /imu --field header.stamp --field orientation</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="issue-tf-transforms-not-available">Issue: &quot;TF transforms not available&quot;<a href="#issue-tf-transforms-not-available" class="hash-link" aria-label="Direct link to Issue: &quot;TF transforms not available&quot;" title="Direct link to Issue: &quot;TF transforms not available&quot;" translate="no">​</a></h4>
<p><strong>Solution</strong>: Verify static transform publisher and frame names</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check TF tree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run tf2_tools view_frames</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Echo transforms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 run tf2_ros tf2_echo base_link camera_link</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="issue-high-cpugpu-usage-with-multiple-sensors">Issue: &quot;High CPU/GPU usage with multiple sensors&quot;<a href="#issue-high-cpugpu-usage-with-multiple-sensors" class="hash-link" aria-label="Direct link to Issue: &quot;High CPU/GPU usage with multiple sensors&quot;" title="Direct link to Issue: &quot;High CPU/GPU usage with multiple sensors&quot;" translate="no">​</a></h4>
<p><strong>Solution</strong>: Optimize sensor frequencies and processing</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check current sensor frequencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic hz /camera/color/image_raw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic hz /scan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ros2 topic hz /imu</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="verification-checklist">Verification Checklist<a href="#verification-checklist" class="hash-link" aria-label="Direct link to Verification Checklist" title="Direct link to Verification Checklist" translate="no">​</a></h2>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Multimodal robot configuration created</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Sensor configuration files created</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Sensor synchronization implemented</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Advanced sensor fusion node created</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->TF configuration and static transforms set up</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Launch files created for sensor integration</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Calibration tools implemented</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Visualization tools created</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test script created and functional</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Troubleshooting guide reviewed</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps" translate="no">​</a></h2>
<p>After implementing multimodal sensor integration:</p>
<ol>
<li class=""><strong>Test sensor fusion</strong> with Isaac Sim</li>
<li class=""><strong>Validate sensor data</strong> synchronization and accuracy</li>
<li class=""><strong>Optimize performance</strong> based on monitoring results</li>
<li class=""><strong>Create sensor integration exercises</strong> for students</li>
</ol>
<p>The multimodal sensor integration framework is now configured and ready for Module 3, providing students with tools to combine data from multiple sensors for enhanced AI-robot perception.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/chapter-3/sensor-integration.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ur/docs/chapter-3/perception-pipeline"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Isaac ROS Perception Pipeline Implementation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ur/docs/chapter-3/model-deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AI Model Deployment in Isaac Sim Environment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#introduction-to-multimodal-sensor-integration" class="table-of-contents__link toc-highlight">Introduction to Multimodal Sensor Integration</a><ul><li><a href="#what-is-multimodal-sensor-integration" class="table-of-contents__link toc-highlight">What is Multimodal Sensor Integration?</a></li><li><a href="#key-sensor-types-in-isaac-sim" class="table-of-contents__link toc-highlight">Key Sensor Types in Isaac Sim</a></li></ul></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#isaac-sim-sensor-configuration" class="table-of-contents__link toc-highlight">Isaac Sim Sensor Configuration</a><ul><li><a href="#1-creating-multimodal-robot-configuration" class="table-of-contents__link toc-highlight">1. Creating Multimodal Robot Configuration</a></li><li><a href="#2-creating-sensor-configuration-file" class="table-of-contents__link toc-highlight">2. Creating Sensor Configuration File</a></li></ul></li><li><a href="#sensor-data-synchronization" class="table-of-contents__link toc-highlight">Sensor Data Synchronization</a><ul><li><a href="#1-creating-sensor-synchronization-node" class="table-of-contents__link toc-highlight">1. Creating Sensor Synchronization Node</a></li></ul></li><li><a href="#sensor-fusion-implementation" class="table-of-contents__link toc-highlight">Sensor Fusion Implementation</a><ul><li><a href="#1-creating-sensor-fusion-package" class="table-of-contents__link toc-highlight">1. Creating Sensor Fusion Package</a></li><li><a href="#2-creating-advanced-sensor-fusion-node" class="table-of-contents__link toc-highlight">2. Creating Advanced Sensor Fusion Node</a></li></ul></li><li><a href="#tf-transform-configuration" class="table-of-contents__link toc-highlight">TF (Transform) Configuration</a><ul><li><a href="#1-creating-static-transform-publisher" class="table-of-contents__link toc-highlight">1. Creating Static Transform Publisher</a></li></ul></li><li><a href="#sensor-integration-launch-files" class="table-of-contents__link toc-highlight">Sensor Integration Launch Files</a><ul><li><a href="#1-creating-launch-directory-and-files" class="table-of-contents__link toc-highlight">1. Creating Launch Directory and Files</a></li><li><a href="#2-creating-sensor-integration-launch-file" class="table-of-contents__link toc-highlight">2. Creating Sensor Integration Launch File</a></li></ul></li><li><a href="#sensor-calibration-and-validation" class="table-of-contents__link toc-highlight">Sensor Calibration and Validation</a><ul><li><a href="#1-creating-sensor-calibration-tools" class="table-of-contents__link toc-highlight">1. Creating Sensor Calibration Tools</a></li></ul></li><li><a href="#sensor-data-visualization" class="table-of-contents__link toc-highlight">Sensor Data Visualization</a><ul><li><a href="#1-creating-sensor-data-visualization-script" class="table-of-contents__link toc-highlight">1. Creating Sensor Data Visualization Script</a></li></ul></li><li><a href="#testing-and-validation" class="table-of-contents__link toc-highlight">Testing and Validation</a><ul><li><a href="#1-creating-sensor-integration-test-script" class="table-of-contents__link toc-highlight">1. Creating Sensor Integration Test Script</a></li><li><a href="#2-running-sensor-integration-test" class="table-of-contents__link toc-highlight">2. Running Sensor Integration Test</a></li></ul></li><li><a href="#troubleshooting-sensor-integration" class="table-of-contents__link toc-highlight">Troubleshooting Sensor Integration</a><ul><li><a href="#common-issues-and-solutions" class="table-of-contents__link toc-highlight">Common Issues and Solutions</a></li></ul></li><li><a href="#verification-checklist" class="table-of-contents__link toc-highlight">Verification Checklist</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Chapters</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ur/docs/intro">Introduction</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/physical-ai-book/hackathon-book/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/ur/docs/contributing">Contributing</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ur/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/physical-ai-book/hackathon-book" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 AI-Native Textbook for Physical AI & Humanoid Robotics. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>